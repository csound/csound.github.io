<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>readk</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="readfi.html" title="readfi" />
    <link rel="next" href="readk2.html" title="readk2" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">readk</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="readfi.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="readk2.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="readk"></a>
      <div class="titlepage"></div>
      <a id="IndexReadk" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">readk</span>
        </h2>
        <p>readk — 
      Lit périodiquement la valeur d'un signal de contrôle de l'orchestre depuis
      un fichier externe.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm184540"></a>
        <h2>Description</h2>
        <p>
      Lit périodiquement la valeur d'un signal de contrôle de l'orchestre depuis
      un fichier externe dans un format spécifique.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm184543"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">kres <span class="command"><strong>readk</strong></span> ifilname, iformat, iprd</pre>
      </div>
      <div class="refsect1">
        <a id="idm184547"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ifilname</em></span> -- un entier N indiquant un fichier nommé
      "readk.N" ou une chaîne de caractères (entre guillemets, espaces autorisés)
      contenant le nom du fichier externe. Si c'est une chaîne de caractères, elle
      peut être un nom de chemin complet avec un répertoire spécifié ou bien un
      simple nom de fichier. Dans ce dernier cas, le fichier est d'abord cherché
      dans le répertoire courant, puis dans SSDIR et finalement dans SFDIR.
    </p>
        <p>
      <span class="emphasis"><em>iformat</em></span> -- spécifie le format des données d'entrée :
      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>1 = entiers signés sur 8 bit (char)</p>
            </li>
            <li class="listitem">
              <p>4 = entiers courts sur 16 bit</p>
            </li>
            <li class="listitem">
              <p>5 = entiers longs sur 32 bit</p>
            </li>
            <li class="listitem">
              <p>6 = flottants sur 32 bit</p>
            </li>
            <li class="listitem">
              <p>7 = entiers longs en ASCII (plein texte)</p>
            </li>
            <li class="listitem">
              <p>8 = flottants en ASCII (plein texte)</p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      Noter que les formats A-law et U-law ne sont pas disponibles, et que tous
      les formats sauf les deux derniers sont binaires. Le fichier d'entrée doit
      être un fichier de données brutes sans en-tête.
    </p>
        <p>
      <span class="emphasis"><em>iprd</em></span> -- le taux (période) en secondes, arrondi à la
      période de contrôle de l'orchestre la plus proche, auquel le signal est lu
      depuis le fichier. Une valeur de 0 implique une période de contrôle (le
      minimum imposé), qui lira les nouvelles valeurs au taux de contrôle de
      l'orchestre. Avec des périodes plus longues, les mêmes valeurs seront
      répétées pendant plus d'une période de contrôle.
      
    </p>
      </div>
      <div class="refsect1">
        <a id="idm184569"></a>
        <h2>Exécution</h2>
        <p>
      <span class="emphasis"><em>kres</em></span> -- le signal lu depuis <span class="emphasis"><em>ifilname</em></span>.
    </p>
        <p>
      Cette opcode permet de lire la valeur d'un signal généré au taux de contrôle
      depuis un fichier externe nommé. Le fichier ne doit pas contenir d'en-tête
      d'information mais il doit contenir une suite temporelle de valeurs de
      contrôle échantillonnées régulièrement. Pour les formats de texte ASCII, les
      valeurs doivent être séparées par au moins un espace. Il peut y avoir
      n'importe quel nombre d'opcodes <span class="emphasis"><em>readk</em></span> dans un instrument
      ou dans un orchestre et il peuvent lire à partir du même ou depuis
      différents fichiers.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm184576"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode readk. Il utilise le fichier
      <a class="ulink" href="examples/readk.csd" target="_top"><em class="citetitle">readk.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm184581"></a>
          <p class="title">
            <strong>Exemple 828. Exemple de l'opcode readk.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm184588"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
<span class="c1">; Audio out   Audio in</span>
-odac           -iadc    <span class="c1">;;;RT audio I/O</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o readk.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="c1">; Initialize the global variables.</span>
<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">kr</span> <span class="o">=</span> <span class="mi">4410</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">10</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">1</span>

<span class="vg">0dbfs</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1">; By Andres Cabrera 2008</span>

<span class="kd">instr</span> <span class="nf">1</span>
<span class="c1">; Read a number from the file every 0.5 seconds</span>
  k<span class="n">fibo</span> <span class="nb">readk</span> <span class="s">"fibonacci.txt"</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">0.5</span>
  k<span class="n">pitchclass</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">+</span>  <span class="p">((</span>k<span class="n">fibo</span> <span class="o">%</span> <span class="mi">12</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
  <span class="nb">printk2</span> k<span class="n">pitchclass</span>
  k<span class="n">cps</span> <span class="o">=</span> <span class="nb">cpspch</span><span class="p">(</span> k<span class="n">pitchclass</span> <span class="p">)</span>
  <span class="nb">printk2</span> k<span class="n">cps</span>
  a<span class="n">1</span> <span class="nb">oscil</span> <span class="mf">0.5</span><span class="p">,</span> k<span class="n">cps</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nb">out</span> a<span class="n">1</span>
<span class="kd">endin</span>


<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">f</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1024</span> <span class="mi">10</span> <span class="mi">1</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">10</span>
<span class="nb">e</span>


<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
        <p>
      Voici un autre exemple de l'opcode readk. Il utilise le fichier
      <a class="ulink" href="examples/readk-2.csd" target="_top"><em class="citetitle">readk-2.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm184676"></a>
          <p class="title">
            <strong>Exemple 829. Exemple 2 de l'opcode readk.</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm184678"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac      <span class="c1">;;;realtime audio out</span>
<span class="c1">;-iadc    ;;;uncomment -iadc if realtime audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o readk-2.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>
<span class="vg">0dbfs</span>  <span class="o">=</span> <span class="mi">1</span>

gi<span class="n">Sine</span> <span class="nb">ftgen</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">^</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span>

<span class="kd">instr</span> <span class="nf">1</span> <span class="c1">;writes a control signal to a file</span>
k<span class="n">freq</span> <span class="nb">randh</span>  <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">500</span> <span class="c1">;generates one random number between 400 and 600 per second</span>
      <span class="nb">dumpk</span>  k<span class="n">freq</span><span class="p">,</span> <span class="s">"dumpk.txt"</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span> <span class="c1">;writes the control signal</span>
      <span class="nb">printk</span> <span class="mi">1</span><span class="p">,</span> k<span class="n">freq</span> 				 <span class="c1">;prints it</span>
<span class="kd">endin</span>

<span class="kd">instr</span> <span class="nf">2</span> <span class="c1">;reads the file written by instr 1</span>
k<span class="n">freq</span> <span class="nb">readk</span>  <span class="s">"dumpk.txt"</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span>
      <span class="nb">printk</span> <span class="mi">1</span><span class="p">,</span> k<span class="n">freq</span> <span class="c1">;prints it</span>
a<span class="n">out</span>  <span class="nb">poscil</span> <span class="mf">.2</span><span class="p">,</span> k<span class="n">freq</span><span class="p">,</span> gi<span class="n">Sine</span>
      <span class="nb">outs</span>   a<span class="n">out</span><span class="p">,</span> a<span class="n">out</span>
<span class="kd">endin</span>

<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="nb">i</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">5</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
      Sa sortie comprendra des lignes comme celles-ci :
      </p>
        <pre class="screen">
WARNING: Seeding from current time 683384022

 i   1 time     1.00033:   463.64510
 i   1 time     2.00000:   463.64510
 i   1 time     3.00000:   483.14200
 i   1 time     4.00000:   567.55973
 i   1 time     5.00000:   576.37060
 i   1 time     6.00000:   460.66550

 i   2 time     6.00033:   463.64510
 i   2 time     7.00000:   463.64510
 i   2 time     8.00000:   483.14200
 i   2 time     9.00000:   567.55970
 i   2 time    10.00000:   576.37060
 i   2 time    11.00000:   460.66550</pre>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm184785"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="dumpk.html" title="dumpk"><em class="citetitle">dumpk</em></a>,
      <a class="link" href="dumpk2.html" title="dumpk2"><em class="citetitle">dumpk2</em></a>,
      <a class="link" href="dumpk3.html" title="dumpk3"><em class="citetitle">dumpk3</em></a>,
      <a class="link" href="dumpk4.html" title="dumpk4"><em class="citetitle">dumpk4</em></a>,
      <a class="link" href="readk2.html" title="readk2"><em class="citetitle">readk2</em></a>,
      <a class="link" href="readk3.html" title="readk3"><em class="citetitle">readk3</em></a>,
      <a class="link" href="readk4.html" title="readk4"><em class="citetitle">readk4</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm184802"></a>
        <h2>Crédits</h2>
        <p>Par : John ffitch and Barry L. Vercoe</p>
        <p>1999 ou avant</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="readfi.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="readk2.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">readfi </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> readk2</td>
        </tr>
      </table>
    </div>
  </body>
</html>
