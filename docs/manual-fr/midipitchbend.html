<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>midipitchbend</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="midiout_i.html" title="midiout_i" />
    <link rel="next" href="midipolyaftertouch.html" title="midipolyaftertouch" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">midipitchbend</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="midiout_i.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="midipolyaftertouch.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="midipitchbend"></a>
      <div class="titlepage"></div>
      <a id="IndexMidipitchbend" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">midipitchbend</span>
        </h2>
        <p>midipitchbend — 
      Retourne une valeur de pitchbend MIDI.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm134889"></a>
        <h2>Description</h2>
        <p>
      <span class="emphasis"><em>midipitchbend</em></span> est conçu pour simplifier
      l'écriture d'instruments que l'on peut utiliser de manière interchangeable
      avec une partition ou depuis l'entrée MIDI, et pour faciliter l'adaptation
      d'instruments écrits à l'origine pour une partition au fonctionnement à
      partir d'une entrée MIDI.
    </p>
        <p>
      En général, il doit être possible d'écrire des définitions d'instrument
      qui fonctionnent de la même manière avec une partition et avec le MIDI, que
      ce soit un fichier MIDI ou une entrée MIDI en , sans utiliser
      d'instructions conditionnelles supplémentaires, et qui tirent pleinement
      avantage des messages de voix MIDI.
    </p>
        <p>
      Noter que la liaison entre des intruments de Csound et les numéros de
      canal MIDI se fait en utilisant l'opcode
      <a class="link" href="massign.html" title="massign"><em class="citetitle">massign</em></a> lors d'une
      exécution en . Pour les exécutions de fichier MIDI, les numéros
      d'instruments sont liés par défaut au canal MIDI + 1, mais ces valeurs par
      défaut peuvent être modifiées par tout message de changement de programme
      dans le fichier.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm134897"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis"><span class="command"><strong>midipitchbend</strong></span> xpitchbend [, ilow] [, ihigh]</pre>
      </div>
      <div class="refsect1">
        <a id="idm134901"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ilow</em></span> (facultatif) -- valeur basse facultative après
      reéchellonnement, 0 par défaut.
    </p>
        <p>
      <span class="emphasis"><em>ihigh</em></span> (facultatif) -- valeur haute facultative après
      reéchellonnement, 127 par défaut.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm134907"></a>
        <h2>Exécution</h2>
        <p>
      <span class="emphasis"><em>xpitchbend</em></span> -- retourne le pitchbend MIDI durant
      l'activation MIDI, et reste inchangé dans les autres cas.
    </p>
        <p>
      Si l'instrument a été activé par une entrée MIDI, l'opcode remplace la
      valeur de <span class="emphasis"><em>xpitchbend</em></span> par la valeur correspondante
      venant de l'entrée MIDI. Si l'instrument n'a <span class="emphasis"><em>PAS</em></span> été
      activé par une entrée MIDI, la valeur de <span class="emphasis"><em>xpitchbend</em></span>
      reste inchangée.
    </p>
        <p>
      Grâce à cela, les p-champs de la partition peuvent recevoir leur valeur
      de données MIDI en entrée durant l'activation MIDI, et de la partition
      dans les autres cas.
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note: Adaptation d'un instrument de Csound activé par partition.">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Adaptation d'un instrument de Csound activé par partition.</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Voir la section <a class="link" href="MidiInterop.html" title="Opcodes pour l'interopérabilité MIDI/partition"><em class="citetitle">Opcodes pour
        l'Interopérabilité MIDI/Partition</em></a> pour plus de détails
        sur l'adaptation d'instruments pilotés par partition au MIDI et vice-versa.
      </p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm134921"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcoce midipitchbend. Il utilise le fichier
      <a class="ulink" href="examples/midipitchbend.csd" target="_top"><em class="citetitle">midipitchbend.csd</em></a>.

      </p>
        <div class="example">
          <a id="idm134926"></a>
          <p class="title">
            <strong>Exemple 569. Exemple de l'opcoce midipitchbend.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm134933"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac    -M1  <span class="c1">;;;realtime audio out and midi in </span>
<span class="c1">;-iadc    ;;;uncomment -iadc if realtime audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o midipitchbend.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>
<span class="vg">0dbfs</span>  <span class="o">=</span> <span class="mi">1</span>

<span class="kd">instr</span> <span class="nf">1</span>

<span class="nb">midinoteonoct</span> <span class="vi">p4</span><span class="p">,</span> <span class="vi">p5</span>				<span class="c1">;gets a MIDI note number value as octave-point-decimal value into p4, and MIDI velocity into p5</span>

k<span class="n">vel</span> <span class="o">=</span> <span class="vi">p5</span><span class="o">/</span><span class="mi">127</span>					<span class="c1">;scale midi velocity to 0-1</span>
k<span class="n">pb</span> <span class="nb">init</span> <span class="mi">0</span>
<span class="nb">midipitchbend</span> k<span class="n">pb</span>
<span class="nb">printk2</span> k<span class="n">pb</span>					<span class="c1">;display the pitch-bend value when it changes</span>
k<span class="n">oct</span> <span class="o">=</span>	<span class="vi">p4</span><span class="o">+</span>k<span class="n">pb</span>					<span class="c1">;add pitchbend values to octave-point-decimal value</span>
k<span class="n">cps</span> <span class="o">=</span>	<span class="nb">cpsoct</span><span class="p">(</span>k<span class="n">oct</span><span class="p">)</span>				<span class="c1">;convert octave-point-decimal value into Hz			</span>
k<span class="n">env</span> <span class="nb">madsr</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.5</span>			<span class="c1">;amplitude envelope multiplied by</span>
a<span class="n">sig</span> <span class="nb">vco2</span> k<span class="n">env</span><span class="o">*</span>k<span class="n">vel</span><span class="p">,</span> k<span class="n">cps</span>			<span class="c1">;velocity value			</span>
     <span class="nb">outs</span>  a<span class="n">sig</span><span class="p">,</span> a<span class="n">sig</span>				

<span class="kd">endin</span>
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">f</span> <span class="mi">0</span> <span class="mi">30</span>	<span class="c1">;runs for 30 seconds</span>
<span class="nb">f</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">4096</span> <span class="mi">10</span> <span class="mi">1</span>	

<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mf">8.000</span> <span class="mi">100</span>	<span class="c1">; play these notes from score as well</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="mf">8.917</span> <span class="mi">100</span>
<span class="nb">e</span>

<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />

      Sa sortie contiendra des lignes comme celles-ci :
      </p>
        <pre class="screen">
 i1     0.12695
 i1     0.00000
 i1    -0.01562</pre>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm135042"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="midichannelaftertouch.html" title="midichannelaftertouch"><em class="citetitle">midichannelaftertouch</em></a>, 
      <a class="link" href="midicontrolchange.html" title="midicontrolchange"><em class="citetitle">midicontrolchange</em></a>, 
      <a class="link" href="mididefault.html" title="mididefault"><em class="citetitle">mididefault</em></a>, 
      <a class="link" href="midinoteoff.html" title="midinoteoff"><em class="citetitle">midinoteoff</em></a>, 
      <a class="link" href="midinoteoncps.html" title="midinoteoncps"><em class="citetitle">midinoteoncps</em></a>, 
      <a class="link" href="midinoteonkey.html" title="midinoteonkey"><em class="citetitle">midinoteonkey</em></a>, 
      <a class="link" href="midinoteonoct.html" title="midinoteonoct"><em class="citetitle">midinoteonoct</em></a>, 
      <a class="link" href="midinoteonpch.html" title="midinoteonpch"><em class="citetitle">midinoteonpch</em></a>, 
      <a class="link" href="midipolyaftertouch.html" title="midipolyaftertouch"><em class="citetitle">midipolyaftertouch</em></a>, 
      <a class="link" href="midiprogramchange.html" title="midiprogramchange"><em class="citetitle">midiprogramchange</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm135065"></a>
        <h2>Crédits</h2>
        <p>Auteur : Michael Gogins</p>
        <p>Nouveau dans la version 4.20</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="midiout_i.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="midipolyaftertouch.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">midiout_i </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> midipolyaftertouch</td>
        </tr>
      </table>
    </div>
  </body>
</html>
