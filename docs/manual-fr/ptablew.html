<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>ptablew</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="ptable3.html" title="ptable3" />
    <link rel="next" href="ptrack.html" title="ptrack" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">ptablew</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="ptable3.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="ptrack.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="ptablew"></a>
      <div class="titlepage"></div>
      <a id="IndexPtablew" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">ptablew</span>
        </h2>
        <p>ptablew — 
      Change le contenu de tables de fonction existantes de n'importe quelle taille.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm172864"></a>
        <h2>Description</h2>
        <p>
      Cet opcode opère sur des tables de fonction existantes, en changeant leur
      contenu. <span class="emphasis"><em>ptablew</em></span> permet d'écrire aux taux-k et -a,
      avec le numéro de table spécifié à l'initialisation. On peut utiliser
      <span class="emphasis"><em>ptablew</em></span> avec un signal et des valeurs d'index de taux-i,
      mais les données spécifiées seront toujours écrites dans la table de fonction
      au taux-k, pas pendant la passe d'initialisation. Les combinaisons valides
      de types de variables sont données par la première lettre des noms de
      variable.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm172869"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis"><span class="command"><strong>ptablew</strong></span> asig, andx, ifn [, ixmode] [, ixoff] [, iwgmode]</pre>
        <pre class="synopsis"><span class="command"><strong>ptablew</strong></span> isig, indx, ifn [, ixmode] [, ixoff] [, iwgmode]</pre>
        <pre class="synopsis"><span class="command"><strong>ptablew</strong></span> ksig, kndx, ifn [, ixmode] [, ixoff] [, iwgmode]</pre>
      </div>
      <div class="refsect1">
        <a id="idm172877"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>asig</em></span>, <span class="emphasis"><em>isig,</em></span> <span class="emphasis"><em>ksig</em></span> --
      La valeur à écrire dans la table.
    </p>
        <p>
      <span class="emphasis"><em>andx</em></span>, <span class="emphasis"><em>indx</em></span>, <span class="emphasis"><em>kndx</em></span> --
      Index dans la table, soit un nombre positif inférieur à la longueur de la
      table (<span class="emphasis"><em>ixmode</em></span> = 0) ou dans l'intervalle allant de 0 à 1
      (<span class="emphasis"><em>ixmode</em></span> != 0)
    </p>
        <p>
      <span class="emphasis"><em>ifn</em></span> -- Numéro de la table. Doit être &gt;= 1. Les
      nombres flottants sont arrondis à une valeur entière. Si le numéro de table
      n'est pas celui d'une table valide, ou si la table n'a pas encore été
      chargée (<a class="link" href="GEN01.html" title="GEN01"><em class="citetitle">GEN01</em></a>),
      il y aura une erreur et l'instrument sera désactivé.
    </p>
        <p>
      <span class="emphasis"><em>ixmode</em></span> (facultatif, 0 par défaut) -- mode d'indexation.
      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
            0 = <span class="emphasis"><em>xndx</em></span> et <span class="emphasis"><em>ixoff</em></span> varient dans
            l'intervalle compris entre 0 et la longueur de la table.
          </p>
            </li>
            <li class="listitem">
              <p>
            !=0 = <span class="emphasis"><em>xndx</em></span> et <span class="emphasis"><em>ixoff</em></span> varient
            dans l'intervalle compris entre 0 et 1. 
          </p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      <span class="emphasis"><em>ixoff</em></span> (facultatif, 0 par défaut) -- décalage de l'index.

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
             0 = l'index est contrôlé directement par <span class="emphasis"><em>xndx</em></span>,
             l'indexation partant du début de la table. 
           </p>
            </li>
            <li class="listitem">
              <p>
             !=0 = l'indexation part d'un endroit dans la table. Les valeurs doivent
             être positives et inférieures à la longueur de la table
             (<span class="emphasis"><em>ixmode</em></span> = 0) ou inférieures à 1
             (<span class="emphasis"><em>ixmode</em></span> != 0).
           </p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      <span class="emphasis"><em>iwgmode</em></span> (facultatif, 0 par défaut) -- Mode cyclique
      et point de garde.

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
             0 = mode limite.
           </p>
            </li>
            <li class="listitem">
              <p>
             1 = mode cyclique.
           </p>
            </li>
            <li class="listitem">
              <p>
             2 = mode avec point de garde.
           </p>
            </li>
          </ul>
        </div>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm172923"></a>
        <h2>Exécution</h2>
        <div class="refsect2">
          <a id="idm172925"></a>
          <h3>Mode limite (0)</h3>
          <p>
        Limite l'index total (<span class="emphasis"><em>ndx</em></span> + <span class="emphasis"><em>ixoff</em></span>) 
        entre 0 et le point de garde. Pour une table de longueur 5, cela 
        signifie que l'on peut écrire à la position 4 (le point de garde).
        Un index total négatif écrit à la position 0.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm172930"></a>
          <h3>Mode cyclique (1)</h3>
          <p>
        Replie l'index total entre les positions 0 et E, où E est inférieur à la
        longueur de la table d'une unité. Par exemple, si le repliement se fait
        dans l'intervalle compris entre 0 et 3, un index total de 6 écrira à la
        position 2.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm172933"></a>
          <h3>Mode point de garde (2)</h3>
          <p>
        Le point de garde est rempli en même temps que la postion 0, avec la même
        valeur.
      </p>
          <p>
        Ceci facilite l'écriture dans les tables que l'on doit lire avec
        interpolation pour produire des formes d'ondes périodiques lisses. De
        plus, avant son utilisation, l'index total est incrémenté de la moitié
        de la distance entre deux positions adjacentes, avant d'être arrondi à
        la valeur entière de la position dans la table.
      </p>
          <p>
        Normallement (<span class="emphasis"><em>igwmode</em></span> = 0 ou 1) pour une table de
        longueur 5, dont les positions de 0 à 3 sont dans la table principale
        et dont la position 4 est le point de garde, un index total compris entre
        0 et 0.999 écrira à la position 0. ("0.999" signifiant juste
        en dessous de 1.0). S'il est compris entre 1.0 et 1.999, il écrira à la
        position 1, etc. Tous les index totaux entre 0 et 4.999 
        (<span class="emphasis"><em>igwmode</em></span> = 0) ou 3.999 (<span class="emphasis"><em>igwmode</em></span> = 1)
        suivent le même schéma. <span class="emphasis"><em>igwmode</em></span> = 0 permet d'écrire
        dans les positions 0 à 4, avec la possibilité d'avoir dans le point de
        garde (4) une valeur différente de celle qui est à la position 0.
      </p>
          <p>
        Avec une table de longueur 5 et <span class="emphasis"><em>iwgmode</em></span> = 2, lorsque
        l'index total est compris entre 0 et 0.499, on écrit dans les positions
        0 à 4. L'intervalle compris entre 0.5 et 1.499 écrit dans la position 1,
        etc. De 3.5 à 4 on écrit aussi dans les positions 0 et 4.
      </p>
          <p>
        De cette manière, l'opération d'écriture est au plus proche des résultats
        de la lecture avec interpolation. Le mode point de garde ne doit être
        utilisé qu'avec des tables ayant un point de garde.
      </p>
          <p>
        Guardpoint mode is accomplished by adding 0.5 to the total index, rounding to the next lowest integer, wrapping it modulo the factor of two which is one less than the table length, writing the table (locations 0 to 3 in our example) and then writing to the guard point if index = 0.
      </p>
          <p>
        <span class="emphasis"><em>ptablew</em></span> n'a pas de valeur de sortie. Les trois
        derniers paramètres sont facultatifs et valent 0 par défaut.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm172948"></a>
          <h3>Précaution avec les numéros de tables de taux-k</h3>
          <p>
        Au taux-k et au taux-a, si un numéro de table &lt; 1 est donné, ou si le
        numéro de table pointe sur une table non-existante ou sur une table
        ayant un longueur nulle (à charger ultérieurement depuis un fichier),
        une erreur est générée et l'instrument est désactivé. Il faut initialiser
        <span class="emphasis"><em>kfn</em></span> et <span class="emphasis"><em>afn</em></span> au taux approprié en
        utilisant <span class="emphasis"><em>init</em></span>. Si l'on tente de mettre une valeur
        de taux-i dans <span class="emphasis"><em>kfn</em></span> ou dans <span class="emphasis"><em>afn</em></span>,
        il y aura une erreur.
      </p>
        </div>
        <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Warning">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Avertissement]" src="images/warning.png" />
              </td>
              <th align="left">Avertissement</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Noter que <span class="emphasis"><em>ptablew</em></span> est toujours un opcode de taux-k.
        Cela signigie que même sa version de taux-i est exécutée au taux-k et
        elle écrit la valeur de la variable de taux-i. Pour cette raison, le code
        suivant ne fonctionnera pas comme attendu :
      </p>
                <pre class="programlisting">
<span class="csdtag">&lt;CsoundSynthesizer&gt;</span>
<span class="csdtag">&lt;CsOptions&gt;</span>
<span class="csdtag">&lt;/CsOptions&gt;</span>
<span class="csdtag">&lt;CsInstruments&gt;</span>
giFt <span class="opc">ftgen</span>  1, 0, 8, 2, 0
<span class="oblock">instr</span> 1
indx <span class="op">=</span> 0
     <span class="opc">ptablew</span> 10, indx, giFt
ival <span class="opc">tab_i</span>  indx, giFt
     <span class="opc">print</span>  ival
<span class="oblock">endin</span>
<span class="csdtag">&lt;/CsInstruments&gt;</span>
<span class="csdtag">&lt;CsScore&gt;</span>
<span class="stamnt">i</span> 1 0 1
<span class="csdtag">&lt;/CsScore&gt;</span>
<span class="csdtag">&lt;/CsoundSynthesizer&gt;</span></pre>
                <p>
        Bien que l'on s'attende à ce que ce programme affiche un 10 sur la console,
        il affichera 0, car <a class="link" href="tab.html" title="tab"><em class="citetitle">tab_i</em></a>
        lira la valeur à l'initialisation de la note, avant la première passe
        d'exécution, quand <span class="emphasis"><em>ptablew</em></span> écrit sa valeur.
      </p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm172980"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="tableiw.html" title="tableiw"><em class="citetitle">tableiw</em></a>,
      <a class="link" href="tablewkt.html" title="tablewkt"><em class="citetitle">tablewkt</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm172987"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : John ffitch d'après Robin Whittle</td>
          </tr>
          <tr>
            <td>Février 2012</td>
          </tr>
        </table>
        <p>
    </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="ptable3.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="ptrack.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">ptable3 </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> ptrack</td>
        </tr>
      </table>
    </div>
  </body>
</html>
