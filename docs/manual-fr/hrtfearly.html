<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>hrtfearly</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="hilbert2.html" title="hilbert2" />
    <link rel="next" href="hrtfmove.html" title="hrtfmove" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">hrtfearly</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="hilbert2.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="hrtfmove.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="hrtfearly"></a>
      <div class="titlepage"></div>
      <a id="IndexHrtfearly" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">hrtfearly</span>
        </h2>
        <p>hrtfearly — 
      Génération audio binaurale 3D avec des premières réflexions haute-fidélité
      dans une pièce paramétrique au moyen d'un algorithme de troncature de
      phase.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197590759232"></a>
        <h2>Description</h2>
        <p>
      Cet opcode inclut essentiellement l'opcode
      <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a> dans la
      modélisation d'une pièce en forme de boîte à chaussure définie par
      l'utilisateur. On peut choisir une pièce par défaut ou l'on peut définir
      des paramètres avancés de la pièce. Les surfaces de la pièce peuvent être
      contrôlées avec les coefficients d'absorption hautes et basses fréquences
      et avec les facteurs de gain d'un égaliseur à trois bandes.
    </p>
        <p>
      Bien que valide comme opcode autonome, <span class="emphasis"><em>hrtfearly</em></span> est
      conçu pour fonctionner avec
      <a class="link" href="hrtfreverb.html" title="hrtfreverb"><em class="citetitle">hrtfreverb</em></a> afin
      de fournir une révervération binaurale dynamique spatialement fidèle.
      Plusieurs sources peuvent être traitées dynamiquement en utilisant plusieurs
      instances de <span class="emphasis"><em>hrtfearly</em></span>. Toutes peuvent ensuite être
      traitées avec une instance de
      <a class="link" href="hrtfreverb.html" title="hrtfreverb"><em class="citetitle">hrtfreverb</em></a>.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197590752688"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">aleft, aright, irt60low, irt60high, imfp <span class="command"><strong>hrtfearly</strong></span> asrc, ksrcx, ksrcy, ksrcz, klstnrx, klstnry, klstnrz, \
      ifilel, ifiler, idefroom [,ifade, isr, iorder, ithreed, kheadrot, iroomx, iroomy, iroomz, iwallhigh, \
      iwalllow, iwallgain1, iwallgain2, iwallgain3, ifloorhigh, ifloorlow, ifloorgain1, ifloorgain2, \
      ifloorgain3, iceilinghigh, iceilinglow, iceilinggain1, iceilinggain2, iceilinggain3]</pre>
      </div>
      <div class="refsect1">
        <a id="idm46197590750112"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ifilel</em></span> - fichier des données spectrales HRTF de gauche.
    </p>
        <p>
      <span class="emphasis"><em>ifiler</em></span> - fichier des données spectrales HRTF de droite.
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Des fichiers de données spectrales (basés sur la base de données HRTF du
        MIT) sont disponibles sous trois différents taux d'échantillonnage :
        44.1, 48 et 96 kHz et sont nommés en conséquence. Le
        <span class="emphasis"><em>sr</em></span> d'entrée et de traitement doit correspondre
        au <span class="emphasis"><em>sr</em></span> du fichier de données. Les fichiers doivent
        se trouver dans le répertoire courant ou dans SADIR (voir
        <a class="link" href="CommandEnvironment.html" title="Variables d'environnement de Csound"><em class="citetitle">Variables d'environnement</em></a>).
      </p>
              </td>
            </tr>
          </table>
        </div>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Les fichiers de données HRTF à utiliser avec 
        <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>,
        <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>,
        <a class="link" href="hrtfstat.html" title="hrtfstat"><em class="citetitle">hrtfstat</em></a>,
        <a class="link" href="hrtfearly.html" title="hrtfearly"><em class="citetitle">hrtfearly</em></a> et
        <a class="link" href="hrtfreverb.html" title="hrtfreverb"><em class="citetitle">hrtfreverb</em></a>
        ont été mis à jour pour les versions 5.15 et ultérieures de Csound (le
        code a été mis à jour et il est plus efficace). Les anciens fichiers de
        données sont maintenant obsolètes.
      </p>
              </td>
            </tr>
          </table>
        </div>
        <p>
      <span class="emphasis"><em>idefroom</em></span> - pièce par défaut, moyenne (1 : 10*10*3),
      petite (2 : 3*4*3) ou grande (3 : 20*25*7). Détails des murs (coefficients
      d'absorption hautes et basses fréquences, gain1, gain2, gain3) :
      0.3, 0.1, 0.75, 0.95, 0.9. Plancher : 0.6, 0.1, 0.95, 0.6, 0.35. 
      Plafond : 0.2, 0.1, 1, 1, 1. Si ce paramètre vaut 0, les paramètres de
      pièce facultatifs seront lus.
    </p>
        <p>
      <span class="emphasis"><em>ifade</em></span> - facultatif, nombre de tampons de traitement
      pour les fondus de changement de phase (8 par défaut). Compris entre 1 et
      24. Voir <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>.
    </p>
        <p>
      <span class="emphasis"><em>isr</em></span> - facultatif, 44.1kHz par défaut. Valeurs acceptées :
      44100, 48000 et 96000.
    </p>
        <p>
      <span class="emphasis"><em>iorder</em></span> - facultatif, ordre des images traitées : plus
      il est élevé et plus il y a de premières réflexions. Vaut 1 par défaut.
      Valeurs acceptées : 0 à 4.
    </p>
        <p>
      <span class="emphasis"><em>ithreed</em></span> - facultatif, les sources d'image sont traitées
      en trois dimensions (1) ou en deux dimensions (0, par défaut).
    </p>
        <p>
      <span class="emphasis"><em>iroomx</em></span> - facultatif, taille x de la pièce en mètres.
      Ce paramètre est lu si aucune pièce par défaut n'est choisie (tous les
      paramètres ci-dessous se comportent de la même manière). La taille minimale
      de la pièce est 2*2*2.
    </p>
        <p>
      <span class="emphasis"><em>iroomy</em></span> - facultatif, taille y de la pièce.
    </p>
        <p>
      <span class="emphasis"><em>iroomz</em></span> - facultatif, taille z de la pièce.
    </p>
        <p>
      <span class="emphasis"><em>iwallhigh</em></span> - facultatif, coefficient d'absorption
      hautes fréquences des murs (les quatre murs sont supposés identiques).
      Les coefficients d'absorption affectent la durée de la réverbération en
      sortie.
    </p>
        <p>
      <span class="emphasis"><em>iwalllow</em></span> - facultatif, coefficient d'absorption
      basses fréquences des murs.
    </p>
        <p>
      <span class="emphasis"><em>iwallgain1</em></span> - facultatif, gain du filtre centré sur
      250 Hz (tous les filtres on un Q impliquant 4 octaves).
    </p>
        <p>
      <span class="emphasis"><em>iwallgain2</em></span> - facultatif, gain du filtre centré sur
      1000 Hz.
    </p>
        <p>
      <span class="emphasis"><em>iwallgain3</em></span> - facultatif, gain du filtre centré sur
      4000 Hz.
    </p>
        <p>
      <span class="emphasis"><em>ifloorhigh, ifloorlow, ifloorgain1, ifloorgain2,
      ifloorgain3</em></span> - facultatif, comme ci-dessus, pour le plancher.
    </p>
        <p>
      <span class="emphasis"><em>iceilinghigh, iceilinglow, iceilinggain1, iceilinggain2,
      iceilinggain3</em></span> - facultatif, comme ci-dessus, pour le plafond.
    </p>
        <p>
      <span class="emphasis"><em>ksrcx</em></span> position x de la source, au moins 10 cm à
      l'intérieur de la pièce. De plus, les HRTF proches ne sont pas traités,
      afin que la source ne soit pas modifiée spatialement dans un rayon de
      45 cm autour de l'auditeur. Ces restrictions s'appliquent également aux
      paramètres ci-dessous.
    </p>
        <p>
      <span class="emphasis"><em>ksrcy</em></span> position y de la source.
    </p>
        <p>
      <span class="emphasis"><em>ksrcz</em></span> position z de la source.
    </p>
        <p>
      <span class="emphasis"><em>klstnrx, klstnry, klstnrz</em></span> position de l'auditeur,
      comme ci-dessus.
    </p>
        <p>
      <span class="emphasis"><em>kheadrot</em></span> - facultatif, angle de rotation de la tête. 
    </p>
        <p>
      <span class="emphasis"><em>asrc</em></span> - Signal source en entrée.
    </p>
        <p>
      <span class="emphasis"><em>irt60low</em></span> - durée de réverbération basses fréquences
      suggérée pour une réverbération binaurale consécutive.
    </p>
        <p>
      <span class="emphasis"><em>irt60high</em></span> - comme ci-dessus, pour les hautes fréquences.
    </p>
        <p>
      <span class="emphasis"><em>imfp</em></span> - chemin libre moyen de la pièce, à utiliser
      avec une réverbération consécutive.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197590711504"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple des opcodes hrtfearly et hrtfreverb. Il utilise le fichier
      <a class="ulink" href="examples/hrtfearly.csd" target="_top"><em class="citetitle">hrtfearly.csd</em></a>. 
    </p>
        <div class="example">
          <a id="idm46197590709488"></a>
          <p class="title">
            <strong>Exemple 403. Exemple de l'opcode htrfearly.</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm46197413482608"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>

<span class="c1">; Select flags here</span>
<span class="c1">; realtime audio out</span>
 -o dac
<span class="c1">; file ouput </span>
<span class="c1">; -o hrtf.wav</span>
  
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>

ga<span class="n">src</span> <span class="nb">init</span> <span class="mi">0</span>	<span class="c1">;global</span>

<span class="kd">instr</span> <span class="nf">1</span>		<span class="c1">;a plucked string, distorted and filtered</span>

  i<span class="n">amp</span> <span class="o">=</span> <span class="mi">15000</span>
  i<span class="n">cps</span> <span class="o">=</span> <span class="nb">cpspch</span><span class="p">(</span><span class="nb">p4</span><span class="p">)</span>

  a<span class="n">1</span> <span class="nb">pluck</span> i<span class="n">amp</span><span class="p">,</span> i<span class="n">cps</span><span class="p">,</span> i<span class="n">cps</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
  a<span class="n">dist</span> <span class="nb">distort1</span> a<span class="n">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
  a<span class="n">filt</span> <span class="nb">moogvcf2</span> a<span class="n">dist</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="mf">.5</span> 
  a<span class="n">out</span> <span class="nb">linen</span> a<span class="n">filt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">p3</span><span class="p">,</span> <span class="mf">.01</span>
  
  ga<span class="n">src</span> <span class="o">=</span> ga<span class="n">src</span> <span class="o">+</span> a<span class="n">out</span>

<span class="kd">endin</span>

<span class="kd">instr</span> <span class="nf">10</span>	<span class="c1">;uses output from instr1 as source</span>
  
  <span class="c1">;simple path for source</span>
  k<span class="n">x</span> <span class="nb">line</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">p3</span><span class="p">,</span> <span class="mi">9</span>

  <span class="c1">;early reflections, room default 1</span>
  a<span class="n">earlyl</span><span class="p">,</span>a<span class="n">earlyr</span><span class="p">,</span> i<span class="n">rt60low</span><span class="p">,</span> i<span class="n">rt60high</span><span class="p">,</span> i<span class="n">mfp</span> <span class="nb">hrtfearly</span> ga<span class="n">src</span><span class="p">,</span> k<span class="n">x</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"hrtf-44100-left.dat"</span><span class="p">,</span> <span class="s">"hrtf-44100-right.dat"</span><span class="p">,</span> <span class="mi">1</span>

  <span class="c1">;later reverb, uses outputs from above</span>
  a<span class="n">revl</span><span class="p">,</span> a<span class="n">revr</span><span class="p">,</span> i<span class="n">del</span> <span class="nb">hrtfreverb</span> ga<span class="n">src</span><span class="p">,</span> i<span class="n">rt60low</span><span class="p">,</span> i<span class="n">rt60high</span><span class="p">,</span> <span class="s">"hrtf-44100-left.dat"</span><span class="p">,</span> <span class="s">"hrtf-44100-right.dat"</span><span class="p">,</span> <span class="mi">44100</span><span class="p">,</span> i<span class="n">mfp</span>

  <span class="c1">;delayed and scaled</span>
  a<span class="n">latel</span> <span class="nb">delay</span> a<span class="n">revl</span> <span class="o">*</span> <span class="mf">.1</span><span class="p">,</span> i<span class="n">del</span>
  a<span class="n">later</span> <span class="nb">delay</span> a<span class="n">revr</span> <span class="o">*</span> <span class="mf">.1</span><span class="p">,</span> i<span class="n">del</span>

  <span class="nb">outs</span>	a<span class="n">earlyl</span> <span class="o">+</span> a<span class="n">latel</span><span class="p">,</span> a<span class="n">earlyr</span> <span class="o">+</span> a<span class="n">later</span>
  
  ga<span class="n">src</span> <span class="o">=</span> <span class="mi">0</span>

<span class="kd">endin</span>
  
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>

<span class="c1">; Play Instrument 1: a simple arpeggio</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">0</span> <span class="mf">.2</span> <span class="mf">8.00</span> 
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mf">8.04</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mf">8.07</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mf">8.11</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mf">9.02</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mf">8.11</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mf">8.07</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mf">8.04</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mf">8.00</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mf">7.09</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">4</span> <span class="mf">8.00</span>

<span class="c1">; Play Instrument 10 for 13 seconds.</span>
<span class="nb">i</span><span class="mi">10</span> <span class="mi">0</span> <span class="mi">13</span>

<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <br class="example-break" />
      </div>
      <div class="refsect1">
        <a id="idm46197590707696"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="hrtfreverb.html" title="hrtfreverb"><em class="citetitle">hrtfreverb</em></a>
      <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>,
      <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>,
      <a class="link" href="hrtfstat.html" title="hrtfstat"><em class="citetitle">hrtfstat</em></a>,
      <a class="link" href="hrtfer.html" title="hrtfer"><em class="citetitle">hrtfer</em></a>.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197590701760"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Brian Carty</td>
          </tr>
          <tr>
            <td>Maynooth</td>
          </tr>
          <tr>
            <td>2011</td>
          </tr>
        </table>
        <p>
    </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="hilbert2.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="hrtfmove.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">hilbert2 </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> hrtfmove</td>
        </tr>
      </table>
    </div>
  </body>
</html>
