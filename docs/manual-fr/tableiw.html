<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>tableiw</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="tableimix.html" title="tableimix" />
    <link rel="next" href="tablekt.html" title="tablekt" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">tableiw</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="tableimix.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="tablekt.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="tableiw"></a>
      <div class="titlepage"></div>
      <a id="IndexTableiw" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">tableiw</span>
        </h2>
        <p>tableiw — 
      Change le contenu de tables de fonction existantes.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197544015920"></a>
        <h2>Description</h2>
        <p>
      Cet opcode opère sur des tables de fonction existantes en changeant leur
      contenu. <span class="emphasis"><em>tableiw</em></span> est utilisé quand toutes les entrées
      sont des variables de taux-i ou des constantes et que l'on veut seulement
      l'exécuter à l'initialisation de l'instrument. Les combinaisons valides
      des types de variable sont indiquées par la première lettre des noms de
      variable.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197544013552"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis"><span class="command"><strong>tableiw</strong></span> isig, indx, ifn [, ixmode] [, ixoff] [, iwgmode]</pre>
      </div>
      <div class="refsect1">
        <a id="idm46197544011568"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>isig</em></span> -- Valeur d'entrée à écrire dans la table.
    </p>
        <p>
      <span class="emphasis"><em>indx</em></span> -- Indice dans la table, un nombre positif
      compris entre 0 et la longueur de la table (<span class="emphasis"><em>ixmode</em></span> = 0)
      ou entre 0 et 1 (<span class="emphasis"><em>ixmode</em></span> différent de 0).
    </p>
        <p>
      <span class="emphasis"><em>ifn</em></span> -- Numéro de la table. Doit être &gt;= 1. Les
      nombres flottants sont arrondis à l'entier inférieur. Si un numéro de
      table ne pointe pas vers une table valide, ou si la table n'a pas encore
      été chargée (<a class="link" href="GEN01.html" title="GEN01"><em class="citetitle">GEN01</em></a>)
      une erreur est générée et l'instrument est désactivé.
    </p>
        <p>
      <span class="emphasis"><em>ixmode</em></span> (facultatif, 0 par défaut) -- mode d'indexation.
      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
            0 = <span class="emphasis"><em>indx</em></span> et <span class="emphasis"><em>ixoff</em></span> sont
            compris entre 0 et la longueur de la table.
          </p>
            </li>
            <li class="listitem">
              <p>
            différent de 0 = <span class="emphasis"><em>indx</em></span> et <span class="emphasis"><em>ixoff</em></span>
            sont compris entre 0 et 1.
          </p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      <span class="emphasis"><em>ixoff</em></span> (facultatif, 0 par défaut) -- décalage de
      l'index.

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
             0 = l'indice résultant est contrôlé directement par
             <span class="emphasis"><em>indx</em></span>, l'indexation commençant depuis le début
             de la table. 
           </p>
            </li>
            <li class="listitem">
              <p>
             Différent de 0 = l'indexation démarre dans la table. La valeur doit
             être positive et inférieure à la longueur de la table
             (<span class="emphasis"><em>ixmode</em></span> = 0) ou inférieure à 1
             (<span class="emphasis"><em>ixmode</em></span> différent de 0).
           </p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      <span class="emphasis"><em>iwgmode</em></span> (facultatif, 0 par défaut) -- mode cyclique et
      point de garde.

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
             0 = mode limite.
           </p>
            </li>
            <li class="listitem">
              <p>
             1 = mode cyclique.
           </p>
            </li>
            <li class="listitem">
              <p>
             2 = mode point de garde.
           </p>
            </li>
          </ul>
        </div>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197543992240"></a>
        <h2>Exécution</h2>
        <div class="refsect2">
          <a id="idm46197543991568"></a>
          <h3>Mode limite (0)</h3>
          <p>
        Limite l'indice résultant (<span class="emphasis"><em>indx</em></span> + <span class="emphasis"><em>ixoff</em></span>)
        entre 0 et le point de garde. Pour une table de longueur 5, cela signigie
        que les positions allant de 0 à 3 et la position 4 (le point de garde)
        peuvent être écrites. Un indice résultant négatif provoque l'écriture
        en position 0.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm46197543988880"></a>
          <h3>Mode cyclique (1)</h3>
          <p>
        Parcours cyclique de l'indice résultant dans les positions 0 à E, où E
        vaut soit la longueur de la table moins un, soit le facteur de 2 qui est
        égal à la longueur de la table moins un. Par exemple, un parcours cyclique
        entre 0 et 3, si bien que l'indice 6 signifie une écriture dans la
        position 2.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm46197543986992"></a>
          <h3>Mode point de garde (2)</h3>
          <p>
        Le point de garde est écrit en même temps que la position 0 avec la même
        valeur.
      </p>
          <p>
        Facilite l'écriture dans des tables prévues pour être lues avec
        interpolation pour produire des formes d'onde cycliques sans discontinuité.
        De plus, avant son utilisation, l'indice résultant est augmenté de la
        moitié de la distance entre une position et la suivante, avant d'être
        arrondi à l'adresse entière inférieure d'une position dans la table.
      </p>
          <p>
        Normalement (<span class="emphasis"><em>iwgmode</em></span> = 0 ou 1), pour une table de
        longueur 5, qui comprend les positions 0 à 3 en partie principale et la
        position 4 comme point de garde, un indice résultant compris entre 0 et
        0.999 provoquera une écriture dans la position 0. ("0.999"
        signifie juste inférieur à 1.0), entre 1.0 et 1.999, l'écriture se fera
        dans la position 1, etc. La même interprétation a lieu pour les indices
        résultants compris entre 0 et 4.999 (<span class="emphasis"><em>igwmode</em></span> = 0)
        ou 3.999 (<span class="emphasis"><em>igwmode</em></span> = 1). <span class="emphasis"><em>igwmode</em></span> = 0
        permet l'écriture dans les positions 0 à 4, avec la possibilité d'avoir
        dans le point de garde (4) une valeur différente de celle de la
        position 0.
      </p>
          <p>
        Avec une table de longueur 5 et <span class="emphasis"><em>iwgmode</em></span> = 2, quand
        l'indice résultant est compris entre 0 et 0.499, l'écriture se fera dans
        les positions 0 et 4. S'il est compris entre 0.5 et 1.499, l'écriture se
        fera dans la position 1, etc. S'il est compris entre 3.5 et 4.0, l'écriture
        se fera également dans les positions 0 et 4.
      </p>
          <p>
        Ainsi, l'écriture s'approche le plus possible des résultats de la lecture
        avec interpolation. Le mode point de garde ne doit être utilisé qu'avec
        des tables qui ont un point de garde.
      </p>
          <p>
        Le mode point de garde se fait en ajoutant 0.5 à l'indice résultant,
        en l'arrondissant à l'entier inférieur le plus proche, puis en le
        réduisant modulo le facteur de deux égal à la longueur de la table
        moins un, enfin en écrivant dans la table (positions 0 à 3 dans notre
        exemple) et dans le point de garde si l'indice vaut 0.
      </p>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm46197543977872"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode tableiw. Il utilise le fichier
      <a class="ulink" href="examples/tableiw.csd" target="_top"><em class="citetitle">tableiw.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm46197543976000"></a>
          <p class="title">
            <strong>Exemple 983. Exemple de l'opcode tableiw.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm46197360009376"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac     <span class="c1">;;;realtime audio out</span>
<span class="c1">;-iadc    ;;;uncomment -iadc if realtime audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o tableiw.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>
<span class="vg">0dbfs</span>  <span class="o">=</span> <span class="mi">1</span>

<span class="nb">seed</span> <span class="mi">0</span>	<span class="c1">;generate new values every time the instr is played</span>

<span class="kd">instr</span> <span class="nf">1</span>

i<span class="n">fn</span> <span class="o">=</span> <span class="nb">p4</span>
i<span class="n">size</span> <span class="o">=</span> <span class="nb">p5</span>
i<span class="n">thresh</span> <span class="o">=</span> <span class="mf">0.5</span>
    
i<span class="n">temp</span> <span class="nb">ftgen</span> i<span class="n">fn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> i<span class="n">size</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">2</span>

i<span class="n">write_value</span> <span class="o">=</span> <span class="mi">0</span>
i<span class="n">_index</span> <span class="o">=</span> <span class="mi">0</span>
    
<span class="nl">loop_start</span><span class="p">:</span>
    i<span class="n">read_value</span> <span class="nb">tablei</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">fn</span>
    
    <span class="k">if</span> i<span class="n">read_value</span> <span class="o">&gt;</span> i<span class="n">thresh</span> <span class="k">then</span>
         i<span class="n">write_value</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span>
         i<span class="n">write_value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">endif</span>
<span class="nb">tableiw</span> i<span class="n">write_value</span><span class="p">,</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">fn</span>
<span class="k">loop_lt</span> i<span class="n">_index</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> i<span class="n">size</span><span class="p">,</span> <span class="nl">loop_start</span>        
    <span class="nb">turnoff</span>

<span class="kd">endin</span>

<span class="kd">instr</span> <span class="nf">2</span>

i<span class="n">fn</span> <span class="o">=</span> <span class="nb">p4</span>
i<span class="n">size</span> <span class="o">=</span> <span class="nb">ftlen</span><span class="p">(</span>i<span class="n">fn</span><span class="p">)</span>    
<span class="nb">prints</span> <span class="s">"Index</span><span class="se">\t</span><span class="s">Value</span><span class="se">\n</span><span class="s">"</span>
    
i<span class="n">_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nl">loop_start</span><span class="p">:</span>
    i<span class="n">value</span> <span class="nb">tablei</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">fn</span>
    <span class="nb">prints</span> <span class="s">"</span><span class="si">%d</span><span class="s">:</span><span class="se">\t</span><span class="s">%f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">value</span>

  <span class="k">loop_lt</span> i<span class="n">_index</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> i<span class="n">size</span><span class="p">,</span> <span class="nl">loop_start</span>		<span class="c1">;read table 1 with our index</span>

a<span class="n">out</span> <span class="nb">oscili</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> i<span class="n">fn</span>			<span class="c1">;use table to play the polypulse</span>
     <span class="nb">outs</span>   a<span class="n">out</span><span class="p">,</span> a<span class="n">out</span>

<span class="kd">endin</span>
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">100</span> <span class="mi">16</span>
<span class="nb">i</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">100</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197543971632"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="tablew.html" title="tablew"><em class="citetitle">tablew</em></a>, 
      <a class="link" href="tablewkt.html" title="tablewkt"><em class="citetitle">tablewkt</em></a>
    </p>
        <p>Plus d'information sur cet opcode :
    <a class="ulink" href="http://www.csoundjournal.com/issue12/genInstruments.html" target="_top">
    <em class="citetitle">http://www.csoundjournal.com/issue12/genInstruments.html</em>
    </a>, écrit par Jacob Joaquin.</p>
      </div>
      <div class="refsect1">
        <a id="idm46197543966944"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Robin Whittle</td>
          </tr>
          <tr>
            <td>Australie</td>
          </tr>
          <tr>
            <td>Mai 1997</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans la version 3.47</p>
        <p>Mise à jour en août 2002, grâce à Abram Hindle qui a indiqué le
    syntaxe correcte.</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="tableimix.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="tablekt.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">tableimix </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> tablekt</td>
        </tr>
      </table>
    </div>
  </body>
</html>
