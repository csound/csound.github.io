<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>cvanal</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="UtilitySoundfile.html#UtilityAnalysis" title="Génération d'un fichier d'analyse (ATSA, CVANAL, HETRO, LPANAL, PVANAL)" />
    <link rel="prev" href="UtilityAtsa.html" title="atsa" />
    <link rel="next" href="hetro.html" title="hetro" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">cvanal</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="UtilityAtsa.html">Précédent</a> </td>
          <th width="60%" align="center">Génération d'un fichier d'analyse (ATSA, CVANAL, HETRO, LPANAL, PVANAL)</th>
          <td width="20%" align="right"> <a accesskey="n" href="hetro.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="cvanal"></a>
      <div class="titlepage"></div>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">cvanal</span>
        </h2>
        <p>cvanal — 
      Convertit un fichier son en une trame de transformée de Fourier.
      <a id="IndexCvanal" class="indexterm"></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm440826"></a>
        <h2>Description</h2>
        <p>
      Analyse de Fourier d'une réponse impulsionnelle pour l'opérateur
      <a class="link" href="convolve.html" title="convolve"><em class="citetitle">convolve</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm440831"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis"><span class="command"><strong>csound -U cvanal</strong></span> [options] nomfichier_entree nomfichier_sortie</pre>
        <pre class="synopsis"><span class="command"><strong>cvanal</strong></span> [options] nomfichier_entree nomfichier_sortie</pre>
      </div>
      <div class="refsect1">
        <a id="idm440837"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>cvanal</em></span> -- convertit un fichier son en une trame de transformée de Fourier. Le
      fichier de sortie peut être utilisé par l'opérateur <span class="emphasis"><em>convolve</em></span> pour réaliser une
      Convolution Rapide entre un signal d'entrée et la réponse impulsionnelle originale. L'analyse est
      conditionnée par les options ci-dessous. Un espace est facultatif entre le drapeau et son argument.
    </p>
        <p>
      <span class="emphasis"><em>-s srate</em></span> -- taux d'échantillonnage du fichier audio d'entrée. Il remplacera la
      valeur srate de l'en-tête du fichier audio, qui s'applique autrement. Si aucun des deux n'est présent,
      la valeur par défaut est 10000.
    </p>
        <p>
      <span class="emphasis"><em>-c canal</em></span> -- numéro du canal à traiter. S'il est omis, tous les canaux sont
      traités par défaut. Si une valeur est donnée, seul le canal choisi sera traité.
    </p>
        <p>
      <span class="emphasis"><em>-b début</em></span> -- date du début (en secondes) du segment audio à analyser. La valeur
      par défaut est 0,0
    </p>
        <p>
      <span class="emphasis"><em>-d durée</em></span> -- durée (en secondes) du segment audio à analyser. La valeur par défaut
      de 0,0 signifie jusqu'à la fin du fichier.
    </p>
        <p>
      <span class="emphasis"><em>-X</em></span> -- écrire le fichier d'analyse dans un format
      indépendant de la machine.
    </p>
        <div class="refsect2">
          <a id="idm440852"></a>
          <h3>Fichiers</h3>
          <p>
        Le fichier de sortie a un en-tête spécial <span class="emphasis"><em>convolve</em></span>, contenant les détails du
        fichier source audio. Les données d'analyse sont stockées comme des nombres <span class="quote">« <span class="quote">virgule flottante</span> »</span>,
        en forme rectangulaire (réel/imaginaire).
      </p>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note: Note">
              <tr>
                <td rowspan="2" align="center" valign="top" width="25">
                  <img alt="[Note]" src="images/note.png" />
                </td>
                <th align="left">Note</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>
          Le fichier d'analyse n'est <span class="emphasis"><em>pas</em></span> indépendant du système ! Assurez-vous que les
          données originales de la réponse impulsionnelle sont conservées. Si nécessaire, le fichier
          d'analyse pourra être recréé.
        </p>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm440861"></a>
        <h2>Exemples</h2>
        <p>

        </p>
        <pre class="programlisting">
<span class="emphasis"><em>cvanal</em></span> unson fichiercv</pre>
        <p>


      analysera le fichier son "unson" pour produire le fichier "fichiercv" à utiliser
      avec <a class="link" href="convolve.html" title="convolve"><em class="citetitle">convolve</em></a>.
    </p>
        <p>
      Pour utiliser des données qui ne sont pas déjà contenues dans un fichier son, un convertisseur de
      fichier son qui accepte des fichiers texte peut être utilisé pour créer un fichier audio standard,
      par exemple le format .DAT pour SOX. Ceci est utile pour implémenter des filtres RIF.
    </p>
        <p>
      Voici un exemple de l'utilitaire cvanal. Il utilise le fichier
      <a class="ulink" href="examples/cvanal.csd" target="_top"><em class="citetitle">cvanal.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm440872"></a>
          <p class="title">
            <strong>Exemple 1352. Exemple de l'utilitaire cvanal.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en temps réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la ligne de commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm440879"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac   -m0  --limiter=.99 <span class="c1">;;;realtime audio out, with limiter protection</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o cvanal.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span><span class="w">

</span><span class="vg">sr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">44100</span><span class="w">
</span><span class="vg">ksmps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="w">
</span><span class="vg">nchnls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="vg">0dbfs</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">

</span><span class="c1">; by Menno Knevel 2021</span><span class="w">

</span>gi<span class="n">len</span><span class="w">  </span><span class="nb">filelen</span><span class="w"> </span><span class="s">"rv_stereo.wav"</span><span class="w">	    </span><span class="c1">; get length of impulse soundfile</span><span class="w">

</span><span class="c1">; analyze sound file and output result to 3 convolve files</span><span class="w">
</span>i<span class="n">res1</span><span class="w"> </span><span class="nb">system_i</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="s">{{ cvanal rv_stereo.wav rv_stereo1.con }}</span><span class="w">                  </span><span class="c1">; default settings</span><span class="w">
</span>i<span class="n">res2</span><span class="w"> </span><span class="nb">system_i</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="s">{{ cvanal -d.15 rv_stereo.wav rv_stereo2.con }}</span><span class="w">            </span><span class="c1">; use only first portion</span><span class="w">
</span>i<span class="n">res3</span><span class="w"> </span><span class="nb">system_i</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="s">{{ cvanal -b.25 -d.001 rv_stereo.wav rv_stereo3.con }}</span><span class="w">    </span><span class="c1">; take very short portion from the end</span><span class="w">


</span><span class="kd">instr</span><span class="w"> </span><span class="nf">1</span><span class="w"> </span><span class="c1">; untreated signal</span><span class="w">
</span>a<span class="n">sig</span><span class="w">    </span><span class="nb">diskin2</span><span class="w">   </span><span class="s">"beats.wav"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="nb">prints</span><span class="w">  </span><span class="s">"</span><span class="se">\n</span><span class="s">---***YOU NOW HEAR THE UNTREATED SOUND SAMPLE***---</span><span class="se">\n</span><span class="s">"</span><span class="w">
</span><span class="nb">outs</span><span class="w">    </span>a<span class="n">sig</span><span class="p">,</span><span class="w"> </span>a<span class="n">sig</span><span class="w">
</span><span class="kd">endin</span><span class="w">

</span><span class="kd">instr</span><span class="w"> </span><span class="nf">2</span><span class="w">

</span><span class="nb">prints</span><span class="w">  </span><span class="s">"</span><span class="se">\n</span><span class="s">---***YOU NOW HEAR THE RESULT OF THIS ANALYZED FILE:***---</span><span class="se">\n</span><span class="s">"</span><span class="w">
</span><span class="nb">prints</span><span class="w"> </span><span class="s">"--**used duration of impulse file = </span><span class="si">%5.3f</span><span class="s"> seconds (total =</span><span class="si">%5.2f</span><span class="s">)**--</span><span class="se">\\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="vi">p5</span><span class="p">,</span><span class="w"> </span>gi<span class="n">len</span><span class="w">

</span>a<span class="n">dry</span><span class="w">    </span><span class="nb">diskin2</span><span class="w"> </span><span class="s">"beats.wav"</span><span class="w">                 </span><span class="c1">; input (dry) audio</span><span class="w">
</span>a<span class="n">wet1</span><span class="p">,</span><span class="w"> </span>a<span class="n">wet2</span><span class="w"> </span><span class="nb">convolve</span><span class="w"> </span>a<span class="n">dry</span><span class="o">*</span><span class="mf">.8</span><span class="p">,</span><span class="w"> </span><span class="vi">p4</span><span class="w">           </span><span class="c1">; stereo convolved (wet) audio</span><span class="w">
</span>a<span class="n">wet1</span><span class="w">  </span><span class="o">*=</span><span class="w">  </span><span class="vi">p6</span><span class="w">                               </span><span class="c1">; scale amplitude of impulse sound, Left</span><span class="w">
</span>a<span class="n">wet2</span><span class="w">  </span><span class="o">*=</span><span class="w">  </span><span class="vi">p6</span><span class="w">                               </span><span class="c1">; &amp; Right channel</span><span class="w">
</span>a<span class="n">drydel</span><span class="w"> </span><span class="nb">delay</span><span class="w">   </span>a<span class="n">dry</span><span class="p">,</span><span class="w"> </span><span class="vi">p5</span><span class="w">                    </span><span class="c1">; delay dry signal to align it with convolved signal</span><span class="w">
</span><span class="nb">outs</span><span class="w">    </span><span class="p">(</span>a<span class="n">drydel</span><span class="o">+</span>a<span class="n">wet1</span><span class="p">)</span><span class="o">*</span><span class="mf">.8</span><span class="p">,(</span>a<span class="n">drydel</span><span class="o">+</span>a<span class="n">wet2</span><span class="p">)</span><span class="o">*</span><span class="mf">.8</span><span class="w"> </span><span class="c1">; mix wet &amp; dry signals </span><span class="w">
</span><span class="kd">endin</span><span class="w">

</span><span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span><span class="w">

</span><span class="nb">i</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w">          </span><span class="c1">; untreated signal</span><span class="w">

</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="s">"rv_stereo1.con"</span><span class="w">    </span><span class="mf">0.39</span><span class="w">    </span><span class="mf">.01</span><span class="w">	</span><span class="c1">; use total impulse</span><span class="w">
</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="s">"rv_stereo2.con"</span><span class="w">    </span><span class="mf">0.15</span><span class="w">    </span><span class="mf">.01</span><span class="w">	</span><span class="c1">; first portion of impulse</span><span class="w">
</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s">"rv_stereo3.con"</span><span class="w">    </span><span class="mf">0.001</span><span class="w">    </span><span class="mi">1</span><span class="w">	</span><span class="c1">; very short portion of impulse, starting from 0.25 sec, &amp; scale amp</span><span class="w">
</span><span class="nb">e</span><span class="w">
</span><span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm441149"></a>
        <h2>Crédits</h2>
        <p>Auteur : Greg Sullivan</p>
        <p>Basé sur l'algorithme donné dans <span class="emphasis"><em>Elements Of Computer Music</em></span>, par
      F. Richard Moore.</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="UtilityAtsa.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="UtilitySoundfile.html#UtilityAnalysis">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="hetro.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">atsa </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> hetro</td>
        </tr>
      </table>
    </div>
  </body>
</html>
