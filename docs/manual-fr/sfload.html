<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>sfload</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="sfinstrm.html" title="sfinstrm" />
    <link rel="next" href="sflooper.html" title="sflooper" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">sfload</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="sfinstrm.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="sflooper.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="sfload"></a>
      <div class="titlepage"></div>
      <a id="IndexSfload" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">sfload</span>
        </h2>
        <p>sfload — 
      Charge en mémoire un fichier d'échantillons SoundFont2 (SF2) en entier.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm306766"></a>
        <h2>Description</h2>
        <p>
      Charge en mémoire un fichier d'échantillons SoundFont2 (SF2) en entier.
      Ces opcodes permettent la gestion de la structure d'échantillon des fichiers
      SF2. Afin de comprendre l'utilisation de ces opcodes, il faut connaître le
      format SF2 dont on peut trouver une brève description dans la section
      <a class="link" href="SiggenSample.html" title="Reproduction de sons échantillonnés"><em class="citetitle">format de fichier SoundFont2</em></a>.
    </p>
        <p>
      <span class="emphasis"><em>sfload</em></span> doit être placé dans le section d'en-tête d'un
      orchestre de Csound.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm306773"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">ir <span class="command"><strong>sfload</strong></span> "filename"</pre>
      </div>
      <div class="refsect1">
        <a id="idm306777"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ir</em></span> -- valeur de retour à utiliser par les autres opcodes
      SF2. Pour <span class="emphasis"><em>sfload</em></span>, <span class="emphasis"><em>ir</em></span> est le
      <span class="emphasis"><em>ifilhandle</em></span>.
    </p>
        <p>
      <span class="emphasis"><em><span class="quote">« <span class="quote">filename</span> »</span></em></span> -- nom du fichier SF2, avec son
      chemin complet. C'est une chaîne de caractères entre guillements avec le
      <span class="quote">« <span class="quote">/</span> »</span> comme séparateur de répertoires (ceci s'applique également
      à DOS et à Windows, où l'utilisation d'un antislash générera une erreur), ou
      bien un entier qui a été lié à une chaîne de caractères par
      <a class="link" href="strset.html" title="strset"><em class="citetitle">strset</em></a>.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm306790"></a>
        <h2>Exécution</h2>
        <p>
      <span class="emphasis"><em>sfload</em></span> charge en mémoire un fichier SF2 en entier. Il
      retourne un identificateur de fichier à utiliser par les autres opcodes. On
      peut placer plusieurs instances de <span class="emphasis"><em>sfload</em></span> dans la section
      d'en-tête d'un orchestre, ce qui permet d'utiliser plusieurs fichiers SF2 dans
      un seul orchestre.
    </p>
        <p>
      Si l'on tente de charger deux fois le même fichier, le fichier déjà chargé
      est utilisé accompagné d'un message d'avertissement (à partir de la
      version 6.14).
    </p>
        <p>
      Ces opcodes ne supportent que la structure d'échantillon des fichiers SF2. La
      structure de modulateur du format SoundFormat2 n'est pas supportée dans Csound.
      Tout traitement ou modulation des données échantillonnées est à la charge de
      l'utilisateur de Csound, ce qui permet de s'affranchir de toutes les
      restrictions imposées par le standard SF2.
    </p>
        <p>
      Il faut noter qu'avant la version 5.12 on pouvait charger au maximum dix
      soundfonts. Cette restriction est maintenant levée.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm306798"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode sfload. Il utilise le fichier
      <a class="ulink" href="examples/sfload.csd" target="_top"><em class="citetitle">sfload.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm306803"></a>
          <p class="title">
            <strong>Exemple 963. Exemple de l'opcode sfload.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm306810"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac <span class="c1">;;;realtime audio out, virtual midi in</span>
<span class="c1">;-iadc    ;;;uncomment -iadc if RT audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o sfload.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span><span class="w">

</span><span class="c1">; By  Menno Knevel - 2020</span><span class="w">

</span><span class="vg">sr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">44100</span><span class="w">
</span><span class="vg">ksmps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="w">
</span><span class="vg">nchnls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="vg">0dbfs</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">

</span><span class="c1">; load in two soundfonts</span><span class="w">
</span>i<span class="n">sf</span><span class="w">	</span><span class="nb">sfload</span><span class="w">	</span><span class="s">"sf_GMbank.sf2"</span><span class="w">
</span>i<span class="n">r</span><span class="w">	</span><span class="nb">sfload</span><span class="w">	</span><span class="s">"07AcousticGuitar.sf2"</span><span class="w">
	</span><span class="nb">sfplist</span><span class="w"> </span>i<span class="n">sf</span><span class="w">
	</span><span class="nb">sfplist</span><span class="w"> </span>i<span class="n">r</span><span class="w">
</span><span class="c1">; first sf_GMbank.sf2 is loaded and assigned to start at 0 and counting up to 328</span><span class="w">
</span><span class="c1">; as there are 329 presets in sf_GMbank.sf2 (0-328).</span><span class="w">
</span><span class="c1">; then 07AcousticGuitar.sf2 is loaded and assigned to replace the 10th preset of already loaded sf_GMbank.sf2</span><span class="w">
	</span><span class="nb">sfpassign</span><span class="w">	</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span>i<span class="n">sf</span><span class="w">	
	</span><span class="nb">sfpassign</span><span class="w">	</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span>i<span class="n">r</span><span class="w">

</span><span class="kd">instr</span><span class="w"> </span><span class="nf">1</span><span class="w"> </span><span class="c1">; play French Horn, bank 0 program 60</span><span class="w">

</span>i<span class="n">num</span><span class="w">	</span><span class="o">=</span><span class="w">	</span><span class="vi">p4</span><span class="w">
</span>i<span class="n">vel</span><span class="w">	</span><span class="o">=</span><span class="w">	</span><span class="vi">p5</span><span class="w">
</span>k<span class="n">amp</span><span class="w">	</span><span class="nb">linsegr</span><span class="w">	</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">.1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span>k<span class="n">amp</span><span class="w">	</span><span class="o">=</span><span class="w"> </span>k<span class="n">amp</span><span class="o">/</span><span class="mi">500000</span><span class="w">						</span><span class="c1">;scale amplitude</span><span class="w">
</span>k<span class="n">freq</span><span class="w">	</span><span class="o">=</span><span class="w">	</span><span class="mi">1</span><span class="w">						</span><span class="c1">;do not change freq from sf</span><span class="w">
</span>a<span class="n">1</span><span class="p">,</span>a<span class="n">2</span><span class="w">	</span><span class="nb">sfplay3</span><span class="w">	</span>i<span class="n">vel</span><span class="p">,</span><span class="w"> </span>i<span class="n">num</span><span class="p">,</span><span class="w"> </span>k<span class="n">amp</span><span class="o">*</span>i<span class="n">vel</span><span class="p">,</span><span class="w"> </span>k<span class="n">freq</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="w">			</span><span class="c1">;preset index = 60</span><span class="w">
	</span><span class="nb">outs</span><span class="w">	</span>a<span class="n">1</span><span class="p">,</span><span class="w"> </span>a<span class="n">2</span><span class="w">	
</span><span class="kd">endin</span><span class="w">
	
</span><span class="kd">instr</span><span class="w"> </span><span class="nf">2</span><span class="w">	</span><span class="c1">; play Guitar replaces sf_GMbank.sf2 at preset index 10</span><span class="w">

</span>i<span class="n">num</span><span class="w">	</span><span class="o">=</span><span class="w">	</span><span class="vi">p4</span><span class="w">
</span>i<span class="n">vel</span><span class="w">	</span><span class="o">=</span><span class="w">	</span><span class="vi">p5</span><span class="w">
</span>k<span class="n">amp</span><span class="w">	</span><span class="nb">linsegr</span><span class="w">	</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">.1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span>k<span class="n">amp</span><span class="w">	</span><span class="o">=</span><span class="w"> </span>k<span class="n">amp</span><span class="o">/</span><span class="mi">700000</span><span class="w">						</span><span class="c1">;scale amplitude</span><span class="w">
</span>k<span class="n">freq</span><span class="w">	</span><span class="o">=</span><span class="w">	</span><span class="mi">1</span><span class="w">						</span><span class="c1">;do not change freq from sf</span><span class="w">
</span>a<span class="n">1</span><span class="p">,</span>a<span class="n">2</span><span class="w">	</span><span class="nb">sfplay3</span><span class="w">	</span>i<span class="n">vel</span><span class="p">,</span><span class="w"> </span>i<span class="n">num</span><span class="p">,</span><span class="w"> </span>k<span class="n">amp</span><span class="o">*</span>i<span class="n">vel</span><span class="p">,</span><span class="w"> </span>k<span class="n">freq</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="w">			</span><span class="c1">;preset index = 10</span><span class="w">
	</span><span class="nb">outs</span><span class="w">	</span>a<span class="n">1</span><span class="p">,</span><span class="w"> </span>a<span class="n">2</span><span class="w">	
</span><span class="kd">endin</span><span class="w">
	
</span><span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span><span class="w">

</span><span class="nb">i</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span><span class="nb">i</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">62</span><span class="w"> </span><span class="o">&lt;</span><span class="w">
</span><span class="nb">i</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">65</span><span class="w"> </span><span class="o">&lt;</span><span class="w">
</span><span class="nb">i</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">69</span><span class="w"> </span><span class="mi">10</span><span class="w">

</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">62</span><span class="w"> </span><span class="o">&lt;</span><span class="w">
</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">65</span><span class="w"> </span><span class="o">&lt;</span><span class="w">
</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">69</span><span class="w"> </span><span class="mi">10</span><span class="w">

</span><span class="nb">e</span><span class="w">
</span><span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm307159"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="sfilist.html" title="sfilist"><em class="citetitle">sfilist</em></a>,
      <a class="link" href="sfinstr.html" title="sfinstr"><em class="citetitle">sfinstr</em></a>,
      <a class="link" href="sfinstrm.html" title="sfinstrm"><em class="citetitle">sfinstrm</em></a>,
      <a class="link" href="sfpassign.html" title="sfpassign"><em class="citetitle">sfpassign</em></a>,
      <a class="link" href="sfplay.html" title="sfplay"><em class="citetitle">sfplay</em></a>,
      <a class="link" href="sfplaym.html" title="sfplaym"><em class="citetitle">sfplaym</em></a>,
      <a class="link" href="sfplist.html" title="sfplist"><em class="citetitle">sfplist</em></a>,
      <a class="link" href="sfpreset.html" title="sfpreset"><em class="citetitle">sfpreset</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm307178"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Gabriel Maldonado</td>
          </tr>
          <tr>
            <td>Italie</td>
          </tr>
          <tr>
            <td>Mai 2000</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans la version 4.07 de Csound</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="sfinstrm.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="sflooper.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">sfinstrm </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> sflooper</td>
        </tr>
      </table>
    </div>
  </body>
</html>
