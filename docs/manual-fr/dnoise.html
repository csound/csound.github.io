<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>dnoise</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="UtilityConversion.html" title="Conversion de fichier (HET_EXPORT, HET_IMPORT, PVLOOK, PV_EXPORT, PV_IMPORT, SDIF2AD, SRC_CONV)" />
    <link rel="prev" href="UtilityConversion.html" title="Conversion de fichier (HET_EXPORT, HET_IMPORT, PVLOOK, PV_EXPORT, PV_IMPORT, SDIF2AD, SRC_CONV)" />
    <link rel="next" href="het_export.html" title="het_export" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">dnoise</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="UtilityConversion.html">Précédent</a> </td>
          <th width="60%" align="center">Conversion de fichier (HET_EXPORT, HET_IMPORT, PVLOOK, PV_EXPORT, PV_IMPORT, SDIF2AD,
    SRC_CONV)</th>
          <td width="20%" align="right"> <a accesskey="n" href="het_export.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="dnoise"></a>
      <div class="titlepage"></div>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">dnoise</span>
        </h2>
        <p>dnoise — 
      Réduit le bruit dans un fichier.
      <a id="IndexDnoise" class="indexterm"></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm442322"></a>
        <h2>Description</h2>
        <p>
      C'est un schéma de réduction de bruit au moyen du seuillage de bruit dans le domaine fréquentiel.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm442325"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis"><span class="command"><strong>dnoise</strong></span> [options] -i fichier_ref_bruit -o fichier_son_sortie format_fichier_son fichier_son_entree</pre>
      </div>
      <div class="refsect1">
        <a id="idm442329"></a>
        <h2>Initialisation</h2>
        <p>
      Options spécifiques à dnoise :

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p><span class="emphasis"><em>(pas d'option)</em></span> fichier son en entrée à débruiter</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-i nomfic</em></span> fichier de référence du bruit en entrée</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-o nomfic</em></span> fichier son de sortie</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-N fnum</em></span> nombre de filtres passe-bande (par défaut : 1024)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-w fovlp</em></span> facteur de chevauchement des filtres : {0,1,(2),3}
          NE PAS UTILISER <span class="emphasis"><em>-w</em></span> ET <span class="emphasis"><em>-M</em></span></p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-M longfa</em></span> longueur de la fenêtre d'analyse (par défaut : N-1
          à moins que <span class="emphasis"><em>-w</em></span> ne soit spécifié)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-L longfs</em></span> longueur de la fenêtre de synthèse (par défaut : M)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-D factd</em></span> facteur de décimation (par défaut : M/8)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-b datedeb</em></span> date de début dans le fichier de référence du bruit
          (par défaut : 0)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-B smpdeb</em></span> échantillon de départ dans le fichier de référence
          du bruit (par défaut : 0)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-e datefin</em></span> date de fin dans le fichier de référence du bruit
          (par défaut : fin du fichier)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-E smpfin</em></span> échantillon de fin dans le fichier de référence du
          bruit (par défaut : fin du fichier)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-t seuil</em></span> seuil au-dessus du bruit de référence en dB (par
          défaut : 30)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-S gfact</em></span> raideur de la coupure au seuil de bruit, intervalle :
          1 à 5 (par défaut : 1)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-n nbrtrm</em></span> nombre de trames de TFR sur lesquelles calculer la
          moyenne (par défaut : 5)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-m gainmin</em></span> gain minimum du seuillage de bruit lorsqu'il est
          fermé (par défaut : -40)</p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      Options de format du fichier son :

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p><span class="emphasis"><em>-A</em></span> format de sortie AIFF</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-W</em></span> format de sortie WAV</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-J</em></span> format de sortie IRCAM</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-h</em></span> pas d'en-tête de fichier (non valide pour une sortie
          AIFF/WAV)</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-8</em></span> échantillons en caractères non signés sur 8 bit</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-c</em></span> échantillons en caractères signés sur 8 bit</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-a</em></span> échantillons en alaw</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-u</em></span> échantillons en ulaw</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-s</em></span> échantillons en entiers courts</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-l</em></span> échantillons en entiers longs</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-f</em></span> échantillons en virgule flottante. Les nombres en virgule
          flottante sont aussi supportés par les fichiers WAV. (Nouveau dans Csound 3.47.)</p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      Options supplémentaires :

      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p><span class="emphasis"><em>-R</em></span> verbose - impression d'une information d'état</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-H [N]</em></span> imprime un caractère de type pulsation à chaque écriture
          dans le fichier son.</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-- nomfic</em></span> sortie de journal dans le fichier nomfic</p>
            </li>
            <li class="listitem">
              <p><span class="emphasis"><em>-V</em></span> verbose - impression d'une information d'état</p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note: Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        DNOISE consulte aussi la variable d'environnement SFOUTYP pour déterminer le format du fichier de
        sortie.
      </p>
                <p>
        L'option -i est utilisée pour un fichier de référence du bruit (créé normalement à partir d'un
        court extrait du fichier à débruiter, dans lequel seul le bruit est audible). Le fichier son
        d'entrée à débruiter peut être donné n'importe où dans la ligne de commande, sans drapeau.
      </p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm442437"></a>
        <h2>Exécution</h2>
        <p>
      C'est un schéma de réduction de bruit au moyen du seuillage de bruit dans le domaine fréquentiel. Il
      fonctionnera mieux dans le cas d'un rapport signal/bruit élevé avec un bruit de type souffle.
    </p>
        <p>
      L'algorithme est celui suggéré par Moorer &amp; Berger dans <span class="quote">« <span class="quote">Linear-Phase Bandsplitting: Theory 
      and Applications</span> »</span> presenté à la 76ème Convention, 8-11 Octobre 1984 à New York, de l'Audio
      Engineering Society (préimpression #2132) sauf qu'il utilise la formulation par
      Chevauchement-Addition Pondéré pour l'analyse et la synthèse de Fourier à court terme au lieu de
      la formulation récursive proposée par Moorer &amp; Berger. Le gain pour chaque bin de fréquence est
      calculé indépendamment selon la formule
      </p>
        <div class="literallayout">
          <p>gain = g0 + (1-g0) * [moy / (moy + th*th*nref)] ^ sh</p>
        </div>
        <p>

      où <span class="emphasis"><em>moy</em></span> et <span class="emphasis"><em>nref</em></span> sont la moyenne quadratique du signal et du
      bruit respectivement pour le bin en question. (Ceci diffère légèrement de la version dans
      Moorer &amp; Berger.)
    </p>
        <p>
      Les paramètres critiques <span class="emphasis"><em>th</em></span> et <span class="emphasis"><em>g0</em></span> sont spécifiés en dB et
      convertis en interne en valeurs décimales. Les valeurs <span class="emphasis"><em>nref</em></span> sont calculées
      au début du programme sur la base d'un fichier de bruit (spécifié dans la ligne de commande) qui
      contient du bruit sans signal.
    </p>
        <p>
      Les valeurs <span class="emphasis"><em>moy</em></span> sont calculée sur une fenêtre rectangulaire de m trames de TFR
      centrée sur la date courante. Cela correspond à une extension temporelle de m*D/R (qui vaut
      typiquement (m*N/8)/R ). Le réglage par défaut de N, m, et D devrait convenir pour la plupart des
      utilisations. Un taux d'échantillonnage supérieur à 16 kHz pourrait signifier un N plus grand.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm442451"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'utilitaire dnoise. Il utilise les fichiers
      <a class="ulink" href="examples/dnoise.csd" target="_top"><em class="citetitle">dnoise.csd</em></a>,
      <a class="ulink" href="examples/MathewsNoise.wav" target="_top"><em class="citetitle">MathewsNoise.wav</em></a>
      et <a class="ulink" href="examples/MathewsN.wav" target="_top"><em class="citetitle">MathewsN.wav</em></a>.
      </p>
        <div class="example">
          <a id="idm442460"></a>
          <p class="title">
            <strong>Exemple 1357. Exemple de l'utilitaire dnoise.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm442467"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac   -m0  <span class="c1">;;;realtime audio out, with limiter protection</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o dnoise.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span><span class="w">

</span><span class="vg">sr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">44100</span><span class="w">
</span><span class="vg">ksmps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="w">
</span><span class="vg">nchnls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="vg">0dbfs</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">

</span><span class="c1">; by Menno Knevel 2022</span><span class="w">

</span><span class="c1">; analyze sound file and output result, and be verbose </span><span class="w">
</span>i<span class="n">res1</span><span class="w"> </span><span class="nb">system_i</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="s">{{ dnoise -V -W        -i MathewsNoise.wav -o outfile01.wav MathewsN.wav }}</span><span class="w">                  </span><span class="c1">; default settings (1024 bandoass filters)</span><span class="w">
</span>i<span class="n">res2</span><span class="w"> </span><span class="nb">system_i</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="s">{{ dnoise -V -W -N8    -i MathewsNoise.wav -o outfile02.wav MathewsN.wav }}</span><span class="w">                  </span><span class="c1">; LoFi, only 8 bandpass filters</span><span class="w">
</span>i<span class="n">res3</span><span class="w"> </span><span class="nb">system_i</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="s">{{ dnoise -V -W -N4096 -i MathewsNoise.wav -o outfile03.wav MathewsN.wav }}</span><span class="w">                  </span><span class="c1">; 4096 bandpass filters used</span><span class="w">

</span><span class="kd">instr</span><span class="w"> </span><span class="nf">1</span><span class="w"> </span><span class="c1">; untreated signal</span><span class="w">
</span>a<span class="n">sig</span><span class="w">    </span><span class="nb">diskin2</span><span class="w">   </span><span class="s">"MathewsN.wav"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">                                         </span><span class="c1">; sample = 17.6 secs</span><span class="w">
</span><span class="nb">prints</span><span class="w">  </span><span class="s">"</span><span class="se">\n</span><span class="s">---***YOU NOW HEAR THE UNTREATED SOUND SAMPLE***---</span><span class="se">\n</span><span class="s">"</span><span class="w">
</span><span class="nb">outs</span><span class="w">    </span>a<span class="n">sig</span><span class="p">,</span><span class="w"> </span>a<span class="n">sig</span><span class="w">
</span><span class="kd">endin</span><span class="w">

</span><span class="kd">instr</span><span class="w"> </span><span class="nf">2</span><span class="w">

</span><span class="nb">prints</span><span class="w">  </span><span class="s">"</span><span class="se">\n</span><span class="s">---***YOU NOW HEAR THE DENOISED FILE WITH DEFAULT SETTINGS:***---</span><span class="se">\n</span><span class="s">"</span><span class="w">
</span>a<span class="n">dnoise</span><span class="w"> </span><span class="nb">diskin2</span><span class="w"> </span><span class="vi">p4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">                 
</span><span class="nb">outs</span><span class="w">    </span>a<span class="n">dnoise</span><span class="p">,</span><span class="w"> </span>a<span class="n">dnoise</span><span class="w">
</span><span class="kd">endin</span><span class="w">

</span><span class="kd">instr</span><span class="w"> </span><span class="nf">3</span><span class="w">

</span><span class="nb">prints</span><span class="w">  </span><span class="s">"</span><span class="se">\n</span><span class="s">---***YOU NOW HEAR THE LoFi FILE:***---</span><span class="se">\n</span><span class="s">"</span><span class="w">
</span>a<span class="n">dnoise</span><span class="w"> </span><span class="nb">diskin2</span><span class="w"> </span><span class="vi">p4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">                 
</span><span class="nb">outs</span><span class="w">    </span>a<span class="n">dnoise</span><span class="p">,</span><span class="w"> </span>a<span class="n">dnoise</span><span class="w">
</span><span class="kd">endin</span><span class="w">

</span><span class="kd">instr</span><span class="w"> </span><span class="nf">4</span><span class="w">

</span><span class="nb">prints</span><span class="w">  </span><span class="s">"</span><span class="se">\n</span><span class="s">---***YOU NOW HEAR THE DENOISED FILE WITH MANY BANDS, CREATING SOME ECHOES:***---</span><span class="se">\n</span><span class="s">"</span><span class="w">
</span>a<span class="n">dnoise</span><span class="w"> </span><span class="nb">diskin2</span><span class="w"> </span><span class="vi">p4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">                 
</span><span class="nb">outs</span><span class="w">    </span>a<span class="n">dnoise</span><span class="p">,</span><span class="w"> </span>a<span class="n">dnoise</span><span class="w">
</span><span class="kd">endin</span><span class="w">
</span><span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span><span class="w">

</span><span class="nb">i</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mf">17.6</span><span class="w">                   </span><span class="c1">; untreated signal</span><span class="w">

</span><span class="nb">i</span><span class="mi">2</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mf">17.6</span><span class="w"> </span><span class="s">"outfile01.wav"</span><span class="w">  </span><span class="c1">; default settings </span><span class="w">
</span><span class="nb">i</span><span class="mi">3</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="mf">17.6</span><span class="w"> </span><span class="s">"outfile02.wav"</span><span class="w">  </span><span class="c1">; LoFi</span><span class="w">
</span><span class="nb">i</span><span class="mi">4</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mf">17.6</span><span class="w"> </span><span class="s">"outfile03.wav"</span><span class="w">  </span><span class="c1">; echo-y</span><span class="w">
</span><span class="nb">e</span><span class="w">
</span><span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm442709"></a>
        <h2>Crédits</h2>
        <p>Auteur : Mark Dolson</p>
        <p>26 août 1989</p>
        <p>Auteur : John ffitch</p>
        <p>30 décembre 2000</p>
        <p>Mis à jour par Rasmus Ekman le 11 mars 2002.</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="UtilityConversion.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="UtilityConversion.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="het_export.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Conversion de fichier (HET_EXPORT, HET_IMPORT, PVLOOK, PV_EXPORT, PV_IMPORT, SDIF2AD,
    SRC_CONV) </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> het_export</td>
        </tr>
      </table>
    </div>
  </body>
</html>
