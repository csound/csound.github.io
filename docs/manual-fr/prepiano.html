<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>prepiano</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="prealloc.html" title="prealloc" />
    <link rel="next" href="print.html" title="print" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">prepiano</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="prealloc.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="print.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="prepiano"></a>
      <div class="titlepage"></div>
      <a id="IndexPrepiano" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">prepiano</span>
        </h2>
        <p>prepiano — 
      Crée un son similaire à celui d'une corde de piano préparé à la
      manière Cage.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm170273"></a>
        <h2>Description</h2>
        <p>
      La sortie audio est un son similaire à celui d'une corde de piano préparé avec
      des gommes et des pièces de monnaie. La méthode utilise un modèle physique
      développé pour la résolution des équations différentielles partielles.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm170276"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">ares <span class="command"><strong>prepiano</strong></span> ifreq, iNS, iD, iK, \
    iT30, iB, kbcl, kbcr, imass, ihvfreq, iinit, ipos, ivel, isfreq, \
    isspread[, irattles, irubbers]</pre>
        <pre class="synopsis">al,ar <span class="command"><strong>prepiano</strong></span> ifreq, iNS, iD, iK, \
    iT30, iB, kbcl, kbcr, imass, ihvfreq, iinit, ipos, ivel, isfreq, \
    isspread[, irattles, irubbers]</pre>
      </div>
      <div class="refsect1">
        <a id="idm170282"></a>
        <h2>Initialisation</h2>
        <p>
    <span class="emphasis"><em>ihvfreq</em></span> -- la fréquence de vibration naturelle du
    marteau.
    </p>
        <p>
    <span class="emphasis"><em>iNS</em></span> -- le nombre de cordes impliquées. Dans un vrai piano
    on trouve 1, 2 ou 3 cordes dans les différentes plages de fréquence.
    </p>
        <p>
    <span class="emphasis"><em>iD</em></span> -- l'importance du désaccord de chaque corde, hormis
    la première, par rapport à la fréquence principale ; mesuré en cents.
    </p>
        <p>
    <span class="emphasis"><em>iK</em></span> -- paramètre de raideur, sans dimension.
    </p>
        <p>
    <span class="emphasis"><em>iT30</em></span> -- durée de chute de 30 db en secondes.
    </p>
        <p>
    <span class="emphasis"><em>ib</em></span> -- paramètre de perte en haute-fréquence (à garder petit).
    </p>
        <p>
    <span class="emphasis"><em>imass</em></span> -- la masse du marteau.
    </p>
        <p>
    <span class="emphasis"><em>ifreq</em></span> -- la fréquence de vibration naturelle du marteau.
    </p>
        <p>
    <span class="emphasis"><em>iinit</em></span> -- la position initiale du marteau.
    </p>
        <p>
    <span class="emphasis"><em>ipos</em></span> -- position de la frappe sur la corde.
    </p>
        <p>
    <span class="emphasis"><em>ivel</em></span> -- vélocité normalisée de la frappe.
    </p>
        <p>
    <span class="emphasis"><em>isfreq</em></span> -- fréquence de balayage du point de lecture.
    </p>
        <p>
    <span class="emphasis"><em>isspread</em></span> -- dispersion de la fréquence de balayage.
    </p>
        <p>
    <span class="emphasis"><em>irattles</em></span> -- numéro de la table donnant les positions de
    la ou des pièces de monnaie.
    </p>
        <p>
    <span class="emphasis"><em>irubbers</em></span> -- numéro de la table donnant les positions de
    la ou des gommes.
    </p>
        <p>
      Les tables des pièces de monnaie et des gommes sont des collections de
      quatre valeurs précédées par un compte. Dans le cas d'une pièce de monnaie,
      les quatre valeurs sont la position, le rapport de densité entre la pièce
      de monnaie et la corde, la fréquence de la pièce de monnaie et sa
      longueur verticale. Pour la gomme, les quatre valeurs sont la position, le
      rapport de densité entre la gomme et la corde, la fréquence de la gomme et
      le paramètre de perte.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm170315"></a>
        <h2>Exécution</h2>
        <p>
      Une note est jouée sur une corde de piano avec les arguments suivants.
    </p>
        <p>
      <span class="emphasis"><em>kbcL</em></span> -- Condition aux limites à l'extrémité gauche de la
      corde (1 fixée, 2 pivotante, 3 libre).
    </p>
        <p>
      <span class="emphasis"><em>kbcR</em></span> -- Condition aux limites à l'extrémité droite de la
      corde (1 fixée, 2 pivotante, 3 libre).
    </p>
        <p>
      Il faut noter que le changement des conditions au limites durant l'exécution
      peut produire des bruits parasites et que cette possibilité n'est fournie
      qu'à titre expérimental.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm170323"></a>
        <h2>Exemples</h2>
        <p>
      Voici en exemple de l'opcode prepiano. Il utilise le fichier
      <a class="ulink" href="examples/prepiano.csd" target="_top"><em class="citetitle">prepiano.csd</em></a>.

      </p>
        <div class="example">
          <a id="idm170328"></a>
          <p class="title">
            <strong>Exemple 730. Exemple de l'opcode prepiano.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm170335"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac     <span class="c1">;;;realtime audio out</span>
<span class="c1">;-iadc    ;;;uncomment -iadc if real audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o prepiano.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>
<span class="vg">0dbfs</span>  <span class="o">=</span> <span class="mi">1</span>

<span class="kd">instr</span> <span class="nf">1</span>
<span class="c1">;;          fund NS detune stiffness decay loss (bndry) (hammer) scan prep</span>
a<span class="n">a</span><span class="p">,</span>a<span class="n">b</span> <span class="nb">prepiano</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nb">p4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">p5</span><span class="p">,</span> <span class="nb">p6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
      <span class="nb">outs</span> a<span class="n">a</span><span class="o">*</span><span class="mf">.2</span><span class="p">,</span> a<span class="n">b</span><span class="o">*</span><span class="mf">.2</span>

<span class="kd">endin</span>
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">f</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">8</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mf">0.6</span> <span class="mi">10</span> <span class="mi">100</span> <span class="mf">0.001</span> <span class="c1">;; 1 rattle</span>
<span class="nb">f</span><span class="mi">2</span> <span class="mi">0</span> <span class="mi">8</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mf">0.7</span> <span class="mi">50</span> <span class="mi">500</span> <span class="mi">1000</span>  <span class="c1">;; 1 rubber</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mf">0.0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mf">0.09</span> <span class="mi">20</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">1</span> <span class="o">.</span>  <span class="o">-</span><span class="mi">1</span> <span class="mf">0.09</span> <span class="mi">40</span>        <span class="c1">;; 1 -&gt; skip initialisation</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">2</span> <span class="o">.</span>  <span class="o">-</span><span class="mi">1</span> <span class="mf">0.09</span> <span class="mi">60</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">3</span> <span class="o">.</span>  <span class="o">-</span><span class="mi">1</span> <span class="mf">0.09</span> <span class="mi">80</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">4</span> <span class="mf">1.8</span>  <span class="o">-</span><span class="mi">1</span> <span class="mf">0.09</span> <span class="mi">100</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm170475"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Stefan Bilbao </td>
          </tr>
          <tr>
            <td>Université d'Edimbourg, UK</td>
          </tr>
          <tr>
            <td>Auteur : John ffitch </td>
          </tr>
          <tr>
            <td>Université de Bath, Codemist Ltd.</td>
          </tr>
          <tr>
            <td>Bath, UK</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans la version 5.05 de Csound</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="prealloc.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="print.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">prealloc </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> print</td>
        </tr>
      </table>
    </div>
  </body>
</html>
