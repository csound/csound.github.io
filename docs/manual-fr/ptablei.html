<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>ptablei</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="DeprecatedTop.html" title="Opcodes de l'orchestre et routines GEN obsolètes" />
    <link rel="prev" href="ptable.html" title="ptable" />
    <link rel="next" href="ptable3.html" title="ptable3" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">ptablei</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="ptable.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes de l'orchestre et routines GEN obsolètes</th>
          <td width="20%" align="right"> <a accesskey="n" href="ptable3.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="ptablei"></a>
      <div class="titlepage"></div>
      <a id="IndexPtablei" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">ptablei</span>
        </h2>
        <p>ptablei — 
      Accède aux valeurs d'une table par indexation directe avec interpolation
      linéaire.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm288189"></a>
        <h2>Description</h2>
        <p>
      Accède aux valeurs d'une table par indexation directe avec interpolation
      linéaire.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm288192"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">ares <span class="command"><strong>ptablei</strong></span> andx, ifn [, ixmode] [, ixoff] [, iwrap]</pre>
        <pre class="synopsis">ires <span class="command"><strong>ptablei</strong></span> indx, ifn [, ixmode] [, ixoff] [, iwrap]</pre>
        <pre class="synopsis">kres <span class="command"><strong>ptablei</strong></span> kndx, ifn [, ixmode] [, ixoff] [, iwrap]</pre>
      </div>
      <div class="refsect1">
        <a id="idm288200"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ifn</em></span> -- numéro de la table de fonction.
    </p>
        <p>
      <span class="emphasis"><em>ixmode</em></span> (facultatif) -- mode d'indexation. La valeur par
      défaut est 0.
      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>0 = indexation brute</p>
            </li>
            <li class="listitem">
              <p>1 = indexation normalisée (0 à 1)</p>
            </li>
          </ul>
        </div>
        <p>
    </p>
        <p>
      <span class="emphasis"><em>ixoff</em></span> (facultatif) -- décalage de l'index. Pour une
      table dont l'origine est centrée, on utilise taille-de-la-table/2 (indexation
      brute) ou 0.5 (indexation normalisée). La valeur par défaut est 0.
    </p>
        <p>
      <span class="emphasis"><em>iwrap</em></span> (facultatif) -- indicateur d'indexation cyclique.
      La valeur par défaut est 0.
      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>0 = pas d'enroulement (les index &lt; 0 sont considérés comme nuls ;
          les index &gt; taille-de-la-table sont bloqués à index=taille-de-la-table)</p>
            </li>
            <li class="listitem">
              <p>1 = indexation cyclique.</p>
            </li>
          </ul>
        </div>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm288220"></a>
        <h2>Exécution</h2>
        <p>
      <span class="emphasis"><em>ptablei</em></span> est un opcode avec interpolation dans lequel
      la partie fractionnaire de l'index est utilisée pour interpoler entre
      entrées adjacentes de la table. Le lissage obtenu par interpolation se fait
      au prix d'une petite durée d'exécution supplémentaire (voir aussi
      <a class="link" href="oscili.html" title="oscili"><em class="citetitle">oscili</em></a>, etc.), sinon
      les opcodes avec et sans interpolation sont interchangeables.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm288226"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode ptablei. Il utilise le fichier
      <a class="ulink" href="examples/ptablei.csd" target="_top"><em class="citetitle">ptablei.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm288231"></a>
          <p class="title">
            <strong>Exemple 1286. Exemple de l'opcode ptablei.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm288238"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac     <span class="c1">;;;realtime audio out</span>
<span class="c1">;-iadc    ;;;uncomment -iadc if realtime audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o tablei.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>
<span class="vg">0dbfs</span>  <span class="o">=</span> <span class="mi">1</span>

<span class="nb">seed</span> <span class="mi">0</span>	<span class="c1">;generate new values every time the instr is played</span>

<span class="kd">instr</span> <span class="nf">1</span>

i<span class="n">fn</span> <span class="o">=</span> <span class="vi">p4</span>
i<span class="n">size</span> <span class="o">=</span> <span class="vi">p5</span>
i<span class="n">thresh</span> <span class="o">=</span> <span class="mf">0.5</span>
    
i<span class="n">temp</span> <span class="nb">ftgen</span> i<span class="n">fn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> i<span class="n">size</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">2</span>

i<span class="n">write_value</span> <span class="o">=</span> <span class="mi">0</span>
i<span class="n">_index</span> <span class="o">=</span> <span class="mi">0</span>
    
<span class="nl">loop_start</span><span class="p">:</span>
    i<span class="n">read_value</span> <span class="nb">ptablei</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">fn</span>
    
    <span class="k">if</span> i<span class="n">read_value</span> <span class="o">&gt;</span> i<span class="n">thresh</span> <span class="k">then</span>
         i<span class="n">write_value</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span>
         i<span class="n">write_value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">endif</span>
<span class="nb">ptableiw</span> i<span class="n">write_value</span><span class="p">,</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">fn</span>
<span class="kp">loop_lt</span> i<span class="n">_index</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> i<span class="n">size</span><span class="p">,</span> <span class="nl">loop_start</span>
    <span class="nb">turnoff</span>

<span class="kd">endin</span>

<span class="kd">instr</span> <span class="nf">2</span>

i<span class="n">fn</span> <span class="o">=</span> <span class="vi">p4</span>
i<span class="n">size</span> <span class="o">=</span> <span class="nb">ftlen</span><span class="p">(</span>i<span class="n">fn</span><span class="p">)</span>    
<span class="nb">prints</span> <span class="s">"Index</span><span class="se">\t</span><span class="s">Value</span><span class="se">\n</span><span class="s">"</span>
    
i<span class="n">_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nl">loop_start</span><span class="p">:</span>
    i<span class="n">value</span> <span class="nb">tablei</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">fn</span>
    <span class="nb">prints</span> <span class="s">"</span><span class="si">%d</span><span class="s">:</span><span class="se">\t</span><span class="si">%f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> i<span class="n">_index</span><span class="p">,</span> i<span class="n">value</span>

  <span class="kp">loop_lt</span> i<span class="n">_index</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> i<span class="n">size</span><span class="p">,</span> <span class="nl">loop_start</span>		<span class="c1">;read table 1 with our index</span>

a<span class="n">out</span> <span class="nb">oscili</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> i<span class="n">fn</span>			<span class="c1">;use table to play the polypulse</span>
     <span class="nb">outs</span>   a<span class="n">out</span><span class="p">,</span> a<span class="n">out</span>

<span class="kd">endin</span>
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">100</span> <span class="mi">16</span>
<span class="nb">i</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">100</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm288406"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="table.html" title="table"><em class="citetitle">table</em></a>,
      <a class="link" href="tablei.html" title="tablei"><em class="citetitle">tablei</em></a>,
      <a class="link" href="table3.html" title="table3"><em class="citetitle">table3</em></a>,
      <a class="link" href="ptable.html" title="ptable"><em class="citetitle">ptable</em></a>,
      <a class="link" href="ptable3.html" title="ptable3"><em class="citetitle">ptable3</em></a>,
      <a class="link" href="oscil1.html" title="oscil1"><em class="citetitle">oscil1</em></a>,
      <a class="link" href="oscil1i.html" title="oscil1i"><em class="citetitle">oscil1i</em></a>,
      <a class="link" href="osciln.html" title="osciln"><em class="citetitle">osciln</em></a>
    </p>
        <p>Plus d'information sur cet opcode :
    <a class="ulink" href="http://www.csoundjournal.com/issue12/genInstruments.html" target="_top">
    <em class="citetitle">http://www.csoundjournal.com/issue12/genInstruments.html</em></a>,
    écrit par Jacob Joaquin.</p>
      </div>
      <div class="refsect1">
        <a id="idm288428"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : John ffitch</td>
          </tr>
          <tr>
            <td>Janvier 2012</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans la version 5.16 de Csound.</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="ptable.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="DeprecatedTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="ptable3.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">ptable </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> ptable3</td>
        </tr>
      </table>
    </div>
  </body>
</html>
