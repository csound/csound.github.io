<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Opcodes de tableaux</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="MathTop.html" title="Opérations mathématiques" />
    <link rel="prev" href="linearalgebraopcodes.html" title="Opcodes d'algèbre linéaire" />
    <link rel="next" href="PitchTop.html" title="Conversion des hauteurs" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Opcodes de tableaux</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="linearalgebraopcodes.html">Précédent</a> </td>
          <th width="60%" align="center">Opérations mathématiques</th>
          <td width="20%" align="right"> <a accesskey="n" href="PitchTop.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="arrayOpcodes"></a>
      <div class="titlepage"></div>
      <a id="Indexarray" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">Opcodes de tableaux</span>
        </h2>
        <p>Opcodes de tableaux</p>
      </div>
      <div class="refsect1">
        <a id="idm47596199133120"></a>
        <h2>Nom de variable</h2>
        <p>
      Un tableau doit être créé (via <a class="link" href="init.html" title="init"><em class="citetitle">init</em></a>
      ou <a class="link" href="fillarray.html" title="fillarray"><em class="citetitle">fillarray</em></a>) sous
      la forme kNomTableau <span class="strong"><strong>suivi</strong></span> de crochets. Les
      crochets déterminent les dimensions du tableau. Ainsi,
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[] <span class="opc">init</span> 10</pre>
        </div>
        <p>
      crée un tableau unidimensionnel (un vecteur) de longueur 10, tandis que
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[][] <span class="opc">init</span> 10, 10</pre>
        </div>
        <p>
      crée un tableau à deux dimensions avec 10 lignes et 10 colonnes.
    </p>
        <p>
      Après l'initialisation du tableau, on y fait référence comme un tout
      <span class="strong"><strong>sans</strong></span> les crochets. Les crochets
      ne sont utilisés que pour indexer un élément :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[]   <span class="opc">init</span> 10             <span class="comment">;with brackets because of initialization</span>
kLen     <span class="op">=</span> lenarray(kArr)    <span class="comment">;without brackets</span>
kFirstEl <span class="op">=</span> kArr[0]           <span class="comment">;indexing with brackets</span></pre>
        </div>
        <p>
    </p>
        <p>
      On utilise la même syntaxe pour une simple copie via l'opérateur '=' :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr1[] <span class="opc">fillarray</span> 1, 2, 3, 4, 5
kArr2[] <span class="op">=</span> kArr1              <span class="comment">;creates kArr2 as copy of kArr1</span></pre>
        </div>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199115008"></a>
        <h2>k-rate</h2>
        <p>
      Noter que la plupart des opérations sur les tableaux ne se font actuellement
      qu'au taux-k. Ainsi, comme pour tout autre opcode de taux-k, une opération
      sur les tableaux sera automatiquement répétée à chaque cycle-k. Par exemple,
      le code suivant réécrit le tableau avec différentes valeurs aléatoires à
      chaque cycle-k, tant que l'instrument est actif :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[] <span class="opc">init</span> 10
kIndx  <span class="op">=</span> 0
<span class="octrl">until</span> kIndx <span class="op">==</span> <span class="opc">lenarray</span>(kArr) <span class="octrl">do</span>
  kArr[kIndx] <span class="opc">rnd31</span> 10, 0
  kIndx <span class="op">+=</span> 1
<span class="octrl">od</span></pre>
        </div>
        <p>
    </p>
        <p>
      Pour éviter cela, on doit l'organiser de la manière habituelle, par
      exemple en utilisant un déclencheur :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[] <span class="opc">init</span> 10
kTrig <span class="opc">metro</span> 1
<span class="octrl">if</span> kTrig <span class="op">==</span> 1 <span class="octrl">then</span> <span class="comment">;do the following once a second</span>
  kIndx  <span class="op">=</span> 0
  <span class="octrl">until</span> kIndx <span class="op">==</span> <span class="opc">lenarray</span>(kArr) <span class="octrl">do</span>
    kArr[kIndx] <span class="opc">rnd31</span> 10, 0
    kIndx <span class="op">+=</span> 1
  <span class="octrl">od</span>
<span class="octrl">endif</span></pre>
        </div>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199094256"></a>
        <h2>Création/initialisation</h2>
        <p>
      La manière habituelle de créer un tableau est d'utiliser <span class="emphasis"><em>init</em></span> :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[]   <span class="opc">init</span> 10     <span class="comment">;creates one-dimensional array with length 10</span>
kArr[][] <span class="opc">init</span> 10, 10 <span class="comment">;creates two-dimensional array</span></pre>
        </div>
        <p>
    </p>
        <p>
      On peut aussi créer un tableau unidimensionnel et le remplir de valeurs
      distinctes au moyen de l'opcode <span class="emphasis"><em>fillarray</em></span>. La ligne
      suivante crée un vecteur de longueur 4 et le remplit avec les nombres
      [1, 2, 3, 4]:
    </p>
        <div class="informalexample">
          <pre class="programlisting">
kArr[] <span class="opc">fillarray</span> 1, 2, 3, 4</pre>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm47596199085616"></a>
        <h2>Longueur</h2>
        <p>
      La fonction <span class="emphasis"><em>lenarray(kArr)</em></span> retourne la longueur d'un
      tableau. Voir l'exemple pour la fonction
      <a class="link" href="lenarray.html" title="lenarray"><em class="citetitle">lenarray</em></a>.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199082752"></a>
        <h2>Copie d'un tableau vers ou d'une table</h2>
        <p>
      </p>
        <div class="informalexample">
          <pre class="programlisting">
<span class="opc">copyf2array</span> kArr, kfn</pre>
        </div>
        <p>
      copie les données d'une table de fonction dans un vecteur.
    </p>
        <p>
      </p>
        <div class="informalexample">
          <pre class="programlisting">
<span class="opc">copya2ftab</span> kArr, kfn</pre>
        </div>
        <p>
      copie les données d'un vecteur dans une table de fonction.
    </p>
        <p>
      Voir les exemples pour les opcodes
      <a class="link" href="copyf2array.html" title="copyf2array"><em class="citetitle">copyf2array</em></a> and
      <a class="link" href="copya2ftab.html" title="copya2ftab"><em class="citetitle">copya2ftab</em></a>.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199074912"></a>
        <h2>Opérations sur les tableaux : maths</h2>
        <div class="refsect2">
          <a id="idm47596199074176"></a>
          <h3>+, -, *, / avec un nombre</h3>
          <p>
        Si les quatre opérateurs de base sont utilisés entre un tableau et un
        nombre scalaire, l'opération est appliquée à chaque élément. La manière
        la plus sûre de le faire est de stocker le résultat dans un nouveau
        tableau :
        </p>
          <div class="informalexample">
            <pre class="programlisting">
kArr1[] <span class="opc">fillarray</span> 1, 2, 3
kArr2[] <span class="op">=</span> kArr1 <span class="op">+</span> 10    <span class="comment">;(kArr2 is now [11, 12, 13])</span></pre>
          </div>
          <p>
        Voici un exemple des opérations tableau/scalaire. Il utilise le fichier
        <a class="ulink" href="examples/array_scalar_math.csd" target="_top"><em class="citetitle">array_scalar_math.csd</em></a>.
        </p>
          <div class="example">
            <a id="idm47596199067968"></a>
            <p class="title">
              <strong>Exemple 3. Exemple des opérations tableau/scalaire</strong>
            </p>
            <div class="example-contents">
              <div class="refsect1">
                <a id="idm47596027422176"></a>
                <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
-n -m128
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>


  <span class="kd">instr</span> <span class="nf">1</span>

<span class="c1">;create array and fill with numbers 1..10</span>
k<span class="n">Arr1</span><span class="p">[]</span> <span class="nb">fillarray</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">Initial content:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr1</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr1</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;add 10</span>
k<span class="n">Arr2</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr1</span> <span class="o">+</span> <span class="mi">10</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">After adding 10:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr2</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr2</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;subtract 5</span>
k<span class="n">Arr3</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr2</span> <span class="o">-</span> <span class="mi">5</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">After subtracting 5:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr3</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr3</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;multiply by -1.5</span>
k<span class="n">Arr4</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr3</span> <span class="o">*</span> <span class="o">-</span><span class="mf">1.5</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">After multiplying by -1.5:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr4</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr4</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;divide by -3/2</span>
k<span class="n">Arr5</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr4</span> <span class="o">/</span> <span class="o">-</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">After dividing by -3/2:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr5</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr5</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;turnoff</span>
        <span class="nb">turnoff</span>
  <span class="kd">endin</span>
  

<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mf">.1</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
              </div>
            </div>
          </div>
          <p><br class="example-break" />
      </p>
        </div>
        <div class="refsect2">
          <a id="idm47596199066000"></a>
          <h3>+, -, *, / avec un autre tableau</h3>
          <p>
        Si les quatre opérateurs de base sont utilisés entre deux tableaux,
        l'opération est appliquée élément à élément. Le résultat peut être
        stocké directement dans un nouveau tableau :
        </p>
          <div class="informalexample">
            <pre class="programlisting">
kArr1[] <span class="opc">fillarray</span> 1, 2, 3
kArr2[] <span class="opc">fillarray</span> 10, 20, 30
kArr3[] <span class="op">=</span> kArr1 <span class="op">+</span> kArr2    <span class="comment">;(kArr3 is now [11, 22, 33])</span></pre>
          </div>
          <p>
        Voici un exemple des opérations de tableau. Il utilise le fichier
        <a class="ulink" href="examples/array_array_math.csd" target="_top"><em class="citetitle">array_array_math.csd</em></a>.
        </p>
          <div class="example">
            <a id="idm47596199059264"></a>
            <p class="title">
              <strong>Exemple 4. Exemple des opérations de tableau</strong>
            </p>
            <div class="example-contents">
              <div class="refsect1">
                <a id="idm47596027348640"></a>
                <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
-n -m128
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

  <span class="kd">instr</span> <span class="nf">1</span>

<span class="c1">;create array and fill with numbers 1..10 resp .1..1</span>
k<span class="n">Arr1</span><span class="p">[]</span> <span class="nb">fillarray</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span>
k<span class="n">Arr2</span><span class="p">[]</span> <span class="nb">fillarray</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">89</span>

<span class="c1">;print contents</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">kArr1:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr1</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr1[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr1</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">kArr2:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr2</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr2[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr2</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;add arrays</span>
k<span class="n">Arr3</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr1</span> <span class="o">+</span> k<span class="n">Arr2</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">kArr1 + kArr2:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr3</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr3[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr3</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;subtract arrays</span>
k<span class="n">Arr4</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr1</span> <span class="o">-</span> k<span class="n">Arr2</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">kArr1 - kArr2:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr4</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr4[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr4</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span>    <span class="o">+=</span>      <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;multiply arrays</span>
k<span class="n">Arr5</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr1</span> <span class="o">*</span> k<span class="n">Arr2</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">kArr1 * kArr2:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr5</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr5[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr5</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;divide arrays</span>
k<span class="n">Arr6</span><span class="p">[]</span> <span class="o">=</span>       k<span class="n">Arr1</span> <span class="o">/</span> k<span class="n">Arr2</span>

<span class="c1">;print content</span>
        <span class="nb">printf</span>  <span class="s">"%s"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">kArr1 / kArr2:</span><span class="se">\n</span><span class="s">"</span>
k<span class="n">ndx</span>    <span class="o">=</span>       <span class="mi">0</span>
  <span class="k">until</span> k<span class="n">ndx</span> <span class="o">==</span> <span class="nb">lenarray</span><span class="p">(</span>k<span class="n">Arr6</span><span class="p">)</span> <span class="k">do</span>
        <span class="nb">printf</span>  <span class="s">"kArr5[</span><span class="si">%d</span><span class="s">] = %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">ndx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> k<span class="n">ndx</span><span class="p">,</span> k<span class="n">Arr6</span><span class="p">[</span>k<span class="n">ndx</span><span class="p">]</span>
k<span class="n">ndx</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">od</span>

<span class="c1">;turnoff</span>
        <span class="nb">turnoff</span>
        
  <span class="kd">endin</span>
  
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mf">.1</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
              </div>
            </div>
          </div>
          <p><br class="example-break" />
      </p>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm47596199057184"></a>
        <h2>Application d'une fonction à un tableau</h2>
        <p>
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArrRes <span class="opc">maparray</span> kArrSrc, "fun"</pre>
        </div>
        <p>
      applique la fonction de taux-k à un argument, définie dans la chaîne de
      caractères, à chaque élément du vecteur.
    </p>
        <p>
      Les fonctions utilisables sont par exemple <span class="emphasis"><em>abs, ceil, exp, floor,
      frac, int, log, log10, round, sqrt</em></span>. Voici un simple exemple :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
kArrSrc[] <span class="opc">fillarray</span> 1, 2, 3, 4, 5
kArrRes[] <span class="opc">init</span>      5
kArrRes   <span class="opc">maparray</span>  kArrSrc, "sqrt"</pre>
        </div>
        <p>
      Voir l'exemple pour l'opcode
      <a class="link" href="maparray.html" title="maparray"><em class="citetitle">maparray</em></a>.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199048704"></a>
        <h2>Opérations sur les tableaux : min, max, sum, scale, slice</h2>
        <div class="refsect2">
          <a id="idm47596199047936"></a>
          <h3>Minimum et maximum</h3>
          <p>
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  kMin [,kMinIndx] <span class="opc">minarray</span> kArr</pre>
          </div>
          <p>
        retourne la plus petite valeur d'un tableau et facultativement son indice.
      </p>
          <p>
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  kMax [,kMaxIndx] <span class="opc">maxarray</span> kArr</pre>
          </div>
          <p>
        retourne la plus grande valeur d'un tableau et facultativement son indice.
        Voir les exemples pour les opcodes
        <a class="link" href="minarray.html" title="minarray"><em class="citetitle">minarray</em></a> and
        <a class="link" href="maxarray.html" title="maxarray"><em class="citetitle">maxarray</em></a>.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm47596199040672"></a>
          <h3>Somme</h3>
          <p>
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  kSum <span class="opc">sumarray</span> kArr</pre>
          </div>
          <p>
        retourne la somme de toutes les valeurs dans <span class="emphasis"><em>kArr</em></span>.
        Voir l'exemple pour l'opcode
        <a class="link" href="sumarray.html" title="sumarray"><em class="citetitle">sumarray</em></a>.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm47596199036224"></a>
          <h3>Pondération</h3>
          <p>
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  <span class="opc">scalearray</span> kArr, kMin, kMax</pre>
          </div>
          <p>
        pondère toutes les valeurs dans <span class="emphasis"><em>kArr</em></span> entre
        <span class="emphasis"><em>kMin</em></span> et <span class="emphasis"><em>kMax</em></span>.
      </p>
          <p>
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  kArr[] <span class="opc">fillarray</span>  1, 3, 9, 5, 6
         <span class="opc">scalearray</span> kArr, 1, 3</pre>
          </div>
          <p>
        change <span class="emphasis"><em>kArr</em></span> en [1, 1.5, 3, 2, 2.25].
        Voir l'exemple pour l'opcode
        <a class="link" href="scalearray.html" title="scalearray"><em class="citetitle">scalearray</em></a>.
      </p>
        </div>
        <div class="refsect2">
          <a id="idm47596199027520"></a>
          <h3>Extrait</h3>
          <p>
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  <span class="opc">slicearray</span> kArr, iStart, iEnd</pre>
          </div>
          <p>
        retourne un extrait de <span class="emphasis"><em>kArr</em></span> compris entre l'indice
        <span class="emphasis"><em>iStart</em></span> et l'indice <span class="emphasis"><em>iEnd</em></span> (inclus).
      </p>
          <p>
        Il faut créer le tableau de destination de l'extrait par avance :
        </p>
          <div class="informalexample">
            <pre class="programlisting">
  kArr[]  <span class="opc">fillarray</span>  1, 2, 3, 4, 5, 6, 7, 8, 9
  kArr1[] <span class="opc">init</span>       5
  kArr2[] <span class="opc">init</span>       4
  kArr1   <span class="opc">slicearray</span> kArr, 0, 4        <span class="comment">;[1, 2, 3, 4, 5]</span>
  kArr2   <span class="opc">slicearray</span> kArr, 5, 8        <span class="comment">;[6, 7, 8, 9]</span></pre>
          </div>
          <p>
        Voir l'exemple pour l'opcode
        <a class="link" href="slicearray.html" title="slicearray"><em class="citetitle">slicearray</em></a>.
      </p>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm47596199015488"></a>
        <h2>Tableaux dans un UDO</h2>
        <p>
      La dimension d'un tableau en entrée doit être déclarée en deux endroits :
      </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
          comme k[] ou k[][] dans la liste des types en entrée
        </li>
            <li class="listitem">
          comme kNom[], kNom[][] etc dans la liste <span class="emphasis"><em>xin</em></span>.
        </li>
          </ul>
        </div>
        <p>
      Par exemple :
      </p>
        <div class="informalexample">
          <pre class="programlisting">
<span class="oblock">opcode</span> FirstEl, k, k[]
<span class="comment">;returns the first element of vector kArr</span>
kArr[] <span class="opc">xin</span>
       <span class="opc">xout</span>   kArr[0]
<span class="oblock">endop</span></pre>
        </div>
        <p>
      Voici un exemple d'un tableau dans un UDO. Il utilise le fichier
      <a class="ulink" href="examples/array_udo.csd" target="_top"><em class="citetitle">array_udo.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm47596199007296"></a>
          <p class="title">
            <strong>Exemple 5. Exemple d'un tableau dans un UDO</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm47596027307248"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
-nm128
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

  <span class="kd">opcode</span> <span class="nf">FirstEl</span><span class="p">,</span> <span class="kt">k</span><span class="p">,</span> <span class="kt">k[]</span>
  <span class="c1">;returns the first element of vector kArr</span>
k<span class="n">Arr</span><span class="p">[]</span> <span class="nb">xin</span>
<span class="nb">xout</span> k<span class="n">Arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="kd">endop</span>

  <span class="kd">instr</span> <span class="nf">1</span> 
k<span class="n">Arr</span><span class="p">[]</span> <span class="nb">fillarray</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span>
k<span class="n">First</span> <span class="nf">FirstEl</span> k<span class="n">Arr</span>
<span class="nb">printf</span> <span class="s">"kFirst = </span><span class="si">%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> k<span class="n">First</span>
<span class="nb">turnoff</span>
  <span class="kd">endin</span>

<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mf">.1</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199005376"></a>
        <p>
      A noter que si un opcode (par exemple <span class="emphasis"><em>inrg</em></span>) modifie
      les arguments de la liste d'arguments sur sa droite, on ne doit pas
      utiliser un élément de tableau indicé dans cette liste. Contrairement
      au variables normales, les tableaux ne sont pas changés par les opcodes.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596199003648"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Cette page du manuel a été écrite par Joachim Heintz.</td>
          </tr>
          <tr>
            <td>Juillet 2013</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans Csound 6.00</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="linearalgebraopcodes.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="MathTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="PitchTop.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Opcodes d'algèbre linéaire </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> Conversion des hauteurs</td>
        </tr>
      </table>
    </div>
  </body>
</html>
