<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>hrtfmove</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="hrtfearly.html" title="hrtfearly" />
    <link rel="next" href="hrtfmove2.html" title="hrtfmove2" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">hrtfmove</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="hrtfearly.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="hrtfmove2.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="hrtfmove"></a>
      <div class="titlepage"></div>
      <a id="IndexHrtfmove" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">hrtfmove</span>
        </h2>
        <p>hrtfmove — 
      Génère un signal audio 3D binaural pour casque par magnitude interpolée et
      phase tronquée.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm99918"></a>
        <h2>Description</h2>
        <p>
      Cet opcode prend un signal source et le spatialise dans les trois dimensions
      entourant l'auditeur en réalisant le produit de convolution de la source et
      de filtres basés sur une fonction de transfert stockée en relation avec la
      tête (HRTF).
    </p>
      </div>
      <div class="refsect1">
        <a id="idm99921"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">aleft, aright <span class="command"><strong>hrtfmove</strong></span> asrc, kAz, kElev, ifilel, ifiler [, imode, ifade, isr]</pre>
      </div>
      <div class="refsect1">
        <a id="idm99925"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ifilel </em></span> -- fichier des données spectrales HRTF de gauche.
    </p>
        <p>
      <span class="emphasis"><em>ifiler </em></span> -- fichier des données spectrales HRTF de droite.
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Des fichiers de données spectrales (basés sur la base de donnée HTRF du MIT)
        sont disponibles dans trois taux d'échantillonnage : 44.1, 48 et 96 kHz et
        sont nommés en conséquense. Le <span class="emphasis"><em>sr</em></span> d'entrée et de
        traitement doit concorder avec celui du fichier de données. Les fichiers
        doivent se trouver dans le répertoire courant ou le SADIR (voir
        <a class="link" href="CommandEnvironment.html" title="Variables d'environnement de Csound"><em class="citetitle">Variables d'Environnement</em></a>).
      </p>
              </td>
            </tr>
          </table>
        </div>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Les fichiers de données HRTF à utiliser avec 
        <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>,
        <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>,
        <a class="link" href="hrtfstat.html" title="hrtfstat"><em class="citetitle">hrtfstat</em></a>,
        <a class="link" href="hrtfearly.html" title="hrtfearly"><em class="citetitle">hrtfearly</em></a> et
        <a class="link" href="hrtfreverb.html" title="hrtfreverb"><em class="citetitle">hrtfreverb</em></a>
        ont été mis à jour pour les versions 5.15 et ultérieures de Csound (le
        code a été mis à jour et il est plus efficace). Les anciens fichiers de
        données sont maintenant obsolètes.
      </p>
              </td>
            </tr>
          </table>
        </div>
        <p>
      <span class="emphasis"><em>imode</em></span> -- facultatif, 0, par défaut, pour une phase
      tronquée, 1 pour une phase minimale.
    </p>
        <p>
      <span class="emphasis"><em>ifade</em></span> -- facultatif, nombre de tampons de traitement
      pour le fondu-enchaîné du changement de phase (8 par défaut). L'intervalle
      autorisé est 1-24. Une faible valeur est recommandée pour les sources
      complexes (4 ou moins : une valeur plus élevée peut rendre audible le
      fondu-enchaîné), une valeur plus élevée pour les sources à bande étroite
      (8 ou plus : une valeur plus faible peut rendre audible l'incohérence due
      aux changements de phase par le filtre). N'a aucun effet sur le traitement
      de la phase minimale.
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Les fondus peuvent parfois se chevaucher (si des trajectoires
        artificiellement rapides/complexes sont demandées). Dans ce cas, un
        avertissement est imprimé. Utiliser un fondu-enchaîné plus court ou
        changer légèrement la trajectoire pour ne pas risquer l'apparition
        d'incohérences.
      </p>
              </td>
            </tr>
          </table>
        </div>
        <p>
      <span class="emphasis"><em>isr</em></span> - facultatif, 44.1 kHz par défaut : valeurs autorisées :
      44100, 48000 et 96000.
 </p>
        <p>
      <span class="emphasis"><em>kAz</em></span> -- valeur d'azimut en degrés. Les valeurs positives
      représentent les positions sur la droite, les valeurs négatives les positions
      sur la gauche.
    </p>
        <p>
      <span class="emphasis"><em>kElev</em></span> -- valeur d'élévation en degrés. Les valeurs
      positives représentent les positions au-dessus de l'horizontale, les valeurs
      négatives les positions sous l'horizontale (min -40).
    </p>
        <p>
      Les trajectoires sans artefact définies par l'utilisateur sont rendues
      possibles par un algorithme basé sur l'interpolation de magnitude spectrale
      et la troncature de phase. Des fondus-enchaînés sont implémentés pour
      minimiser/éliminer d'éventuelles incohérences causées par la mise à jour des
      valeurs de phase. Ces fondus-enchaînés sont réalisés sur des tampons de
      traitement convolutif dont le nombre peut être défini par l'utilisateur.
      Les sources complexes peuvent ne nécessiter un fondu-enchaîné que sur un
      tampon ; les sources à bande étroite peuvent en nécessiter plusieurs.
      L'opcode offre aussi un traitement basé sur la phase minimale, une méthode
      plus traditionnelle et complexe. Dans ce mode, les filtres hrtf utilisés
      sont réduits à des représentation de phase minimale et l'interpolation
      utilise ensuite la relation entre la magnitude de phase minimale et les
      spectres de phase. Le délai interaural, qui est inhérent au procédé de phase
      tronquée, est réintroduit dans le procédé de phase minimale au moyen de
      lignes à retard variables.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm99962"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode hrtfmove. Il utilise le fichier
      <a class="ulink" href="examples/hrtfmove.csd" target="_top"><em class="citetitle">hrtfmove.csd</em></a>. 
    </p>
        <div class="example">
          <a id="idm99967"></a>
          <p class="title">
            <strong>Exemple 415. Exemple de l'opcode hrtfmove.</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm99969"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select flags here</span>
<span class="c1">; realtime audio out </span>
 -o dac 
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
 <span class="c1">;-o hrtf.wav</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">kr</span> <span class="o">=</span> <span class="mi">4410</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">10</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>

ga<span class="n">src</span> <span class="nb">init</span> <span class="mi">0</span>

<span class="kd">instr</span> <span class="nf">1</span>		<span class="c1">;a plucked string</span>

  k<span class="n">amp</span> <span class="o">=</span> <span class="nb">p4</span>
  k<span class="n">cps</span> <span class="o">=</span> <span class="nb">cpspch</span><span class="p">(</span><span class="nb">p5</span><span class="p">)</span>
  i<span class="n">cps</span> <span class="o">=</span> <span class="nb">cpspch</span><span class="p">(</span><span class="nb">p5</span><span class="p">)</span>

  a<span class="n">1</span> <span class="nb">pluck</span> k<span class="n">amp</span><span class="p">,</span> k<span class="n">cps</span><span class="p">,</span> i<span class="n">cps</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>

  ga<span class="n">src</span> <span class="o">=</span> a<span class="n">1</span>

<span class="kd">endin</span>

<span class="kd">instr</span> <span class="nf">10</span>	<span class="c1">;uses output from instr1 as source</span>

 k<span class="n">az</span>	<span class="nb">linseg</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">p3</span><span class="p">,</span> <span class="mi">720</span>		<span class="c1">;2 full rotations</span>

 a<span class="n">left</span><span class="p">,</span>a<span class="n">right</span> <span class="nb">hrtfmove</span> ga<span class="n">src</span><span class="p">,</span> k<span class="n">az</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="s">"hrtf-44100-left.dat"</span><span class="p">,</span><span class="s">"hrtf-44100-right.dat"</span>

 <span class="nb">outs</span>	a<span class="n">left</span><span class="p">,</span> a<span class="n">right</span>
  
<span class="kd">endin</span>

<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>

<span class="c1">; Play Instrument 1: a simple arpeggio</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">0</span> <span class="mf">.2</span> <span class="mi">15000</span> <span class="mf">8.00</span> 
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mi">15000</span> <span class="mf">8.04</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mi">15000</span> <span class="mf">8.07</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mi">15000</span> <span class="mf">8.11</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="mi">15000</span> <span class="mf">9.02</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mi">15000</span> <span class="mf">8.11</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mi">15000</span> <span class="mf">8.07</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mi">15000</span> <span class="mf">8.04</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mi">15000</span> <span class="mf">8.00</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mi">15000</span> <span class="mf">7.09</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="mi">15000</span> <span class="mf">8.00</span>

<span class="c1">; Play Instrument 10 for 10 seconds.</span>
<span class="nb">i</span><span class="mi">10</span> <span class="mi">0</span> <span class="mi">10</span>

<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <br class="example-break" />
      </div>
      <div class="refsect1">
        <a id="idm100132"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>,
      <a class="link" href="hrtfstat.html" title="hrtfstat"><em class="citetitle">hrtfstat</em></a>,
      <a class="link" href="hrtfer.html" title="hrtfer"><em class="citetitle">hrtfer</em></a>.
    </p>
        <p>Plus d'information sur cet opcode :
      <a class="ulink" href="http://www.csoundjournal.com/issue9/newHRTFOpcodes.html" target="_top"><em class="citetitle">http://www.csoundjournal.com/issue9/newHRTFOpcodes.html</em></a>,
      écrit par Brian Carty.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm100144"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Brian Carty</td>
          </tr>
          <tr>
            <td>Maynooth</td>
          </tr>
          <tr>
            <td>2008</td>
          </tr>
        </table>
        <p>
    </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="hrtfearly.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="hrtfmove2.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">hrtfearly </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> hrtfmove2</td>
        </tr>
      </table>
    </div>
  </body>
</html>
