<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>sfpreset</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="sfplist.html" title="sfplist" />
    <link rel="next" href="shaker.html" title="shaker" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">sfpreset</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="sfplist.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="shaker.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="sfpreset"></a>
      <div class="titlepage"></div>
      <a id="IndexSfpreset" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">sfpreset</span>
        </h2>
        <p>sfpreset — 
      Associe un preset d'un fichier d'échantillons SoundFont2 (SF2) à un indice
      numérique.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596128799296"></a>
        <h2>Description</h2>
        <p>
      Associe un preset d'un fichier d'échantillons SoundFont2 (SF2) préalablement
      chargé en mémoire à un indice numérique.
      Ces opcodes permettent la gestion de la structure d'échantillon des fichiers
      SF2. Afin de comprendre l'utilisation de ces opcodes, il faut connaître le
      format SF2 dont on peut trouver une brève description dans l'annexe
      <a class="link" href="MiscSf2.html" title="Annexe G. Format de fichier SoundFont2"><em class="citetitle">Format de Fichier SoundFont2</em></a>.
    </p>
        <p>
      <span class="emphasis"><em>sfpreset</em></span> doit être placé dans la section d'en-tête d'un
      orchestre de Csound.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596128795600"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">ir <span class="command"><strong>sfpreset</strong></span> iprog, ibank, ifilhandle, ipreindex</pre>
      </div>
      <div class="refsect1">
        <a id="idm47596128793408"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>ir</em></span> -- valeur de retour à utiliser par les autres opcodes
      SF2. Pour <span class="emphasis"><em>sfpreset</em></span>, <span class="emphasis"><em>ir</em></span> est le
      <span class="emphasis"><em>ipreindex</em></span>.
    </p>
        <p>
      <span class="emphasis"><em>iprog</em></span> -- numéro de programme d'une banque de presets dans
      un fichier SF2.
    </p>
        <p>
      <span class="emphasis"><em>ibank</em></span> -- numéro d'une banque spécifique d'un fichier SF2.
    </p>
        <p>
      <span class="emphasis"><em>ifilhandle</em></span> -- nombre unique généré par l'opcode
      <span class="emphasis"><em>sfload</em></span> à utiliser comme identificateur pour un fichier
      SF2. On peut charger et activer plusieurs fichiers SF2 en même temps.
    </p>
        <p>
      <span class="emphasis"><em>ipreindex</em></span> -- indice du preset.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596128786048"></a>
        <h2>Exécution</h2>
        <p>
      <span class="emphasis"><em>sfpreset</em></span> associe un preset d'un fichier SF2 préalablement
      chargé en mémoire à un indice numérique, à utiliser ensuite avec les opcodes
      <span class="emphasis"><em>sfplay</em></span> et <span class="emphasis"><em>sfplaym</em></span>. L'utilisateur doit
      connaître à l'avance les numéros de banque du preset afin de remplir les
      arguments correspondants. On peut placer plusieurs instances de
      <span class="emphasis"><em>sfpreset</em></span> dans la section d'en-tête d'un orchestre, chacune
      associant un preset différent appartenant au même (ou à différents) fichiers
      SF2 à différents indices numériques.
    </p>
        <p>
      Ces opcodes ne supportent que la structure d'échantillon des fichiers SF2. La
      structure de modulateur du format SoundFormat2 n'est pas supportée dans Csound.
      Tout traitement ou modulation des données échantillonnées est à la charge de
      l'utilisateur de Csound, ce qui permet de s'affranchir de toutes les
      restrictions imposées par le standard SF2.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596128780992"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode sfpreset. Il utilise le fichier
      <a class="ulink" href="examples/sfpreset.csd" target="_top"><em class="citetitle">sfpreset.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm47596128779120"></a>
          <p class="title">
            <strong>Exemple 888. Exemple de l'opcode sfpreset.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm47595946440576"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
-odac -+rtmidi=virtual -M0  <span class="c1">;;;realtime audio out, virtual midi in</span>
<span class="c1">;-iadc    ;;;uncomment -iadc if RT audio input is needed too</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o sfpreset.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">2</span>
<span class="vg">0dbfs</span>  <span class="o">=</span> <span class="mi">1</span>

gi<span class="n">sf1</span>	<span class="nb">sfload</span>	 <span class="s">"sf_GMbank.sf2"</span>
	<span class="nb">sfplist</span>	 gi<span class="n">sf1</span>						<span class="c1">;list presets of first soundfont</span>
gi<span class="n">sf2</span>	<span class="nb">sfload</span>	 <span class="s">"07AcousticGuitar.sf2"</span>
	<span class="nb">sfplist</span>	 gi<span class="n">sf2</span>						<span class="c1">;list presets of second soundfont</span>
gi<span class="n">r</span>	<span class="nb">sfpreset</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> gi<span class="n">sf1</span><span class="p">,</span> <span class="mi">0</span> 				<span class="c1">;assign Synth Strings to index 0</span>
gi<span class="n">v</span>	<span class="nb">sfpreset</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> gi<span class="n">sf2</span><span class="p">,</span> <span class="mi">1</span>					<span class="c1">;assign AcousticGuitar to index 1</span>
<span class="nb">print</span> gi<span class="n">r</span>
<span class="nb">print</span> gi<span class="n">v</span>

<span class="kd">instr</span> <span class="nf">1</span>	<span class="c1">; play from score and midi keyboard</span>

	<span class="nb">mididefault</span>	<span class="mi">60</span><span class="p">,</span> <span class="nb">p3</span>
	<span class="nb">midinoteonkey</span>	<span class="nb">p4</span><span class="p">,</span> <span class="nb">p5</span>
i<span class="n">num</span>	<span class="nb">init</span>	<span class="nb">p4</span>
i<span class="n">vel</span>	<span class="nb">init</span>	<span class="nb">p5</span>
i<span class="n">vel</span>	<span class="nb">init</span>	i<span class="n">vel</span><span class="o">/</span><span class="mi">127</span>					<span class="c1">;make velocity dependent</span>
k<span class="n">amp</span>	<span class="nb">linsegr</span>	<span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">.1</span><span class="p">,</span> <span class="mi">0</span>
k<span class="n">amp</span>	<span class="o">=</span> k<span class="n">amp</span><span class="o">/</span><span class="mi">5000</span>						<span class="c1">;scale amplitude</span>
k<span class="n">freq</span>	<span class="nb">init</span>	<span class="mi">1</span>						<span class="c1">;do not change freq from sf</span>
a<span class="n">1</span><span class="p">,</span>a<span class="n">2</span>	<span class="nb">sfplay3</span>	i<span class="n">vel</span><span class="p">,</span> i<span class="n">num</span><span class="p">,</span> k<span class="n">amp</span><span class="o">*</span>i<span class="n">vel</span><span class="p">,</span> k<span class="n">freq</span><span class="p">,</span> <span class="nb">p6</span>
	<span class="nb">outs</span>	a<span class="n">1</span><span class="p">,</span> a<span class="n">2</span>
	
<span class="kd">endin</span>
	
<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">f</span><span class="mi">0</span>  <span class="mi">60</span>		<span class="c1">; stay active for 1 minute</span>

<span class="nb">i</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">60</span> <span class="mi">127</span> <span class="mi">0</span>	<span class="c1">;= Synth Strings I from first soundfont</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="mi">62</span> <span class="o">&lt;</span>   <span class="o">.</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="mi">65</span> <span class="o">&lt;</span>   <span class="o">.</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="mi">69</span> <span class="mi">10</span>  <span class="o">.</span>

<span class="nb">i</span><span class="mi">1</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">60</span> <span class="mi">127</span> <span class="mi">1</span>	<span class="c1">;= AcousticGuitar from second soundfont</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="mi">62</span> <span class="o">&lt;</span>   <span class="o">.</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="mi">65</span> <span class="o">&lt;</span>   <span class="o">.</span>
<span class="nb">i</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="mi">69</span> <span class="mi">10</span>  <span class="o">.</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596128774816"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="sfilist.html" title="sfilist"><em class="citetitle">sfilist</em></a>,
      <a class="link" href="sfinstr.html" title="sfinstr"><em class="citetitle">sfinstr</em></a>,
      <a class="link" href="sfinstrm.html" title="sfinstrm"><em class="citetitle">sfinstrm</em></a>,
      <a class="link" href="sfload.html" title="sfload"><em class="citetitle">sfload</em></a>,
      <a class="link" href="sfpassign.html" title="sfpassign"><em class="citetitle">sfpassign</em></a>,
      <a class="link" href="sfplay.html" title="sfplay"><em class="citetitle">sfplay</em></a>,
      <a class="link" href="sfplaym.html" title="sfplaym"><em class="citetitle">sfplaym</em></a>,
      <a class="link" href="sfplist.html" title="sfplist"><em class="citetitle">sfplist</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47596128766048"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Gabriel Maldonado</td>
          </tr>
          <tr>
            <td>Italie</td>
          </tr>
          <tr>
            <td>Mai 2000</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans la version 4.07 de Csound</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="sfplist.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="shaker.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">sfplist </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> shaker</td>
        </tr>
      </table>
    </div>
  </body>
</html>
