<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Widgets FLTK et contrôleurs GUI</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="ControlTop.html" title="Contrôle d'instrument" />
    <link rel="prev" href="ControlDurctl.html" title="Instructions de contrôle de durée" />
    <link rel="next" href="ControlFltkValuators.html" title="Valuateurs FLTK" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Widgets FLTK et contrôleurs GUI</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="ControlDurctl.html">Précédent</a> </td>
          <th width="60%" align="center">Contrôle d'instrument</th>
          <td width="20%" align="right"> <a accesskey="n" href="ControlFltkValuators.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="section">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="ControlFltkIntro"></a>Widgets FLTK et contrôleurs GUI</h2>
          </div>
        </div>
      </div>
      <p>
    Les widgets permettent de dessiner une Interface Utilisateur Graphique (GUI) personnalisée
    pour contrôler un orchestre en temps réel. Ils sont dérivés de la bibliothèque libre FLTK (Fast Light
    ToolKit). Cette bibliothèque est une des plus rapides parmi les bibliothèques disponibles, supporte
    OpenGL et devrait être compatible avec différentes plates-formes (Windows, Linux, Unix et Mac OS). Le
    sous-ensemble de FLTK implémenté dans Csound fournit les types d'objets suivants :
    </p>
      <div class="variablelist">
        <dl class="variablelist">
          <dt>
            <span class="term">Conteneurs</span>
          </dt>
          <dd>
            <p>
            Les <a class="link" href="ControlFltkIntro.html#ControlFltkContainers" title="Conteneurs FLTK"><em class="citetitle">Conteneurs FLTK</em></a> sont des
            widgets qui contiennent d'autres widgets tels que des panneaux, des fenêtres,
            etc. Csound fournit les objets conteneurs suivants :
            </p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style="list-style-type: disc; ">
                <li class="listitem">Panneaux</li>
                <li class="listitem">Zones déroulantes</li>
                <li class="listitem">Paquets</li>
                <li class="listitem">Onglets</li>
                <li class="listitem">Groupes</li>
              </ul>
            </div>
            <p>
          </p>
          </dd>
          <dt>
            <span class="term">Valuateurs</span>
          </dt>
          <dd>
            <p>
            Les objets les plus utiles sont appelés
            <a class="link" href="ControlFltkValuators.html" title="Valuateurs FLTK"><em class="citetitle">Valuateurs FLTK</em></a>. Ces objets
            permettent à l'utilisateur de modifier les valeurs des paramètres de synthèse en temps réel. Csound
            fournit les objets valuateurs suivants :
            </p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style="list-style-type: disc; ">
                <li class="listitem">Réglettes</li>
                <li class="listitem">Boutons rotatifs</li>
                <li class="listitem">Molettes</li>
                <li class="listitem">Champs texte</li>
                <li class="listitem">Joysticks</li>
                <li class="listitem">Compteurs</li>
              </ul>
            </div>
            <p>
          </p>
          </dd>
          <dt>
            <span class="term">Autres widgets</span>
          </dt>
          <dd>
            <p>
            Il y a 
            d'<a class="link" href="ControlFltkOther.html" title="Autres widgets FLTK"><em class="citetitle">autres widgets FLTK</em></a>
            qui ne sont ni des valuateurs ni des conteneurs :
            </p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style="list-style-type: disc; ">
                <li class="listitem">Boutons</li>
                <li class="listitem">Bancs de boutons</li>
                <li class="listitem">Etiquettes</li>
                <li class="listitem">Détection Clavier et Souris</li>
              </ul>
            </div>
            <p>
          </p>
          </dd>
        </dl>
      </div>
      <p>
  </p>
      <p>
    Il y a aussi d'autres opcodes utiles pour modifier
    l'<a class="link" href="ControlFltkAppearance.html" title="Modifier l'apparence des widgets FLTK"><em class="citetitle">apparence des widgets</em></a> :
    </p>
      <div class="itemizedlist">
        <ul class="itemizedlist" style="list-style-type: disc; ">
          <li class="listitem">Mettre à jour la valeur d'un widget.</li>
          <li class="listitem">Choisir les couleurs principale et de sélection d'un widget.</li>
          <li class="listitem">Choisir le type, la taille et la couleur de police des widgets.</li>
          <li class="listitem">Redimensionner un widget.</li>
          <li class="listitem">Cacher et Montrer un widget.</li>
        </ul>
      </div>
      <p>
  </p>
      <p>
    Il y a aussi ces <a class="link" href="ControlFltkGeneral.html" title="Opcodes généraux relatifs aux widgets FLTK"><em class="citetitle">opcodes généraux</em></a>
    qui permettent les actions suivantes :
    </p>
      <div class="itemizedlist">
        <ul class="itemizedlist" style="list-style-type: disc; ">
          <li class="listitem">Lancer le processus léger (thread) des widgets :
        <a class="link" href="FLrun.html" title="FLrun"><em class="citetitle">FLrun</em></a></li>
          <li class="listitem">Charger des instantanés contenant l'état de tous les valuateurs d'un orchestre :
        <a class="link" href="FLgetsnap.html" title="FLgetsnap"><em class="citetitle">FLgetsnap</em></a> et
        <a class="link" href="FLloadsnap.html" title="FLloadsnap"><em class="citetitle">FLloadsnap</em></a>.</li>
          <li class="listitem">Sauvegarder des instantanés contenant l'état de tous les valuateurs d'un orchestre :
        <a class="link" href="FLsavesnap.html" title="FLsavesnap"><em class="citetitle">FLsavesnap</em></a> et
        <a class="link" href="FLsetsnap.html" title="FLsetsnap"><em class="citetitle">FLsetsnap</em></a></li>
          <li class="listitem">Fixer le groupe d'instantanés d'un valuateur déclaré :
        <a class="link" href="FLsetSnapGroup.html" title="FLsetSnapGroup"><em class="citetitle">FLsetSnapGroup</em></a></li>
        </ul>
      </div>
      <p>
  </p>
      <p>
    Ci-dessous un exemple simple de code Csound pour créer une fenêtre. Noter que tous les opcodes
    sont de taux-init et ne doivent être appelés qu'une seule fois par session. La meilleure manière de les
    utiliser est de les placer dans la section d'en-tête de l'orchestre, avant tout instrument. Même
    s'il n'est pas interdit de les placer dans un instrument, cela peut conduire à des résultats
    imprévisibles si l'instrument est appelé plus d'une fois.
  </p>
      <p>
    Chaque conteneur est fait d'un couple d'opcodes : le premier indique le début du bloc du conteneur et
    le deuxième indique la fin du bloc du conteneur. Certains blocs de conteneur peuvent être imbriqués
    mais il ne peuvent pas se chevaucher. Après avoir défini tous les conteneurs, il faut lancer un
    processus léger de widgets en utilisant l'opcode spécial <span class="emphasis"><em>FLrun</em></span> qui
    ne prend pas d'argument.
  </p>
      <p>
    </p>
      <div class="informalexample">
        <pre class="programlisting">
<span class="csdtag">&lt;CsoundSynthesizer&gt;</span>
<span class="csdtag">&lt;CsOptions&gt;</span>
<span class="comment">; Sélectionner les options audio/midi ici, en fonction de la plate-forme</span>
<span class="comment">; Sortie audio   Entrée audio    Pas de messages</span>
   -odac           -iadc            -d           <span class="comment">;;; E/S audio en Temps Réel</span>
<span class="comment">; Pour une sortie différée ne garder que la ligne ci-dessous :</span>
<span class="comment">; -o linseg.wav -W ;;; pour une sortie dans un fichier sur toute plate-forme</span>
<span class="csdtag">&lt;/CsOptions&gt;</span>
<span class="csdtag">&lt;CsInstruments&gt;</span>
<span class="comment">;*******************************</span>
<span class="ohdr">sr</span><span class="op">=</span>48000
<span class="ohdr">kr</span><span class="op">=</span>480
<span class="ohdr">ksmps</span><span class="op">=</span>100
<span class="ohdr">nchnls</span><span class="op">=</span>1

<span class="comment">;*** Il est recommandé de placer presque tout le code GUI dans la</span>
<span class="comment">;*** section d'en-tête de l'orchestre</span>

        <span class="opc">FLpanel</span>         "Panel1",450,550 <span class="comment">;***** début du conteneur</span>
<span class="comment">; placer ici quelques widgets</span>
        <span class="opc">FLpanelEnd</span>      <span class="comment">;***** fin du conteneur</span>

        <span class="opc">FLrun</span>           <span class="comment">;***** lance le thread FLTK, toujours requis !</span>
<span class="oblock">instr</span> 1
<span class="comment">; placer ici du code de synthèse</span>
<span class="oblock">endin</span>
<span class="comment">;*******************************</span>
<span class="csdtag">&lt;/CsInstruments&gt;</span>
<span class="csdtag">&lt;CsScore&gt;</span>
<span class="stamnt">f</span> 0 3600 <span class="comment">; table bidon pour l'entrée en temps réel</span>
<span class="stamnt">e</span>

<span class="csdtag">&lt;/CsScore&gt;</span>
<span class="csdtag">&lt;/CsoundSynthesizer&gt;</span></pre>
      </div>
      <p>

    Le code précédent crée simplement un panneau (une fenêtre vide car aucun widget n'est
    défini à l'intérieur du conteneur).

  </p>
      <p>
    L'exemple suivant crée deux panneaux et insère une réglette dans chacun d'entre eux :

    </p>
      <div class="informalexample">
        <pre class="programlisting">
<span class="csdtag">&lt;CsoundSynthesizer&gt;</span>
<span class="csdtag">&lt;CsOptions&gt;</span>
<span class="comment">; Sélectionner les options audio/midi ici, en fonction de la plate-forme</span>
<span class="comment">; Sortie audio   Entrée audio    Pas de messages</span>
   -odac           -iadc            -d           <span class="comment">;;; E/S audio en Temps Réel</span>
<span class="comment">; Pour une sortie différée ne garder que la ligne ci-dessous :</span>
<span class="comment">; -o linseg.wav -W ;;; pour une sortie dans un fichier sur toute plate-forme</span>
<span class="csdtag">&lt;/CsOptions&gt;</span>
<span class="csdtag">&lt;CsInstruments&gt;</span>
<span class="comment">;*******************************</span>
<span class="ohdr">sr</span><span class="op">=</span>48000
<span class="ohdr">kr</span><span class="op">=</span>480
<span class="ohdr">ksmps</span><span class="op">=</span>100
<span class="ohdr">nchnls</span><span class="op">=</span>1

        <span class="opc">FLpanel</span>         "Panel1",450,550,100,100 <span class="comment">;***** début de conteneur</span>
gk1,iha <span class="opc">FLslider</span>        "FLslider 1", 500, 1000, 0 ,1, -1, 300,15, 20,50
        <span class="opc">FLpanelEnd</span>      <span class="comment">;***** fin de conteneur</span>

        <span class="opc">FLpanel</span>         "Panel2",450,550,100,100 <span class="comment">;***** début de conteneur</span>
gk2,ihb <span class="opc">FLslider</span>        "FLslider 2", 100, 200, 0 ,1, -1, 300,15, 20,50
        <span class="opc">FLpanelEnd</span>      <span class="comment">;***** fin de conteneur</span>

        <span class="opc">FLrun</span>           <span class="comment">;***** lance le thread FLTK, toujours requis !</span>

<span class="oblock">instr 1</span>
<span class="comment">; les variables gk1 et gk2 qui contiennent les valeurs de sortie des valuateurs</span>
<span class="comment">; définis précédemment, peuvent être utilisées à l'intérieur des instruments</span>
<span class="opc">printk2</span> gk1
<span class="opc">printk2</span> gk2   <span class="comment">; imprime les valeurs des valuateurs chaque fois qu'elles changent</span>
<span class="oblock">endin</span>
<span class="comment">;*******************************</span>
<span class="csdtag">&lt;/CsInstruments&gt;</span>
<span class="csdtag">&lt;CsScore&gt;</span>
<span class="stamnt">f</span> 0 3600 <span class="comment">; table bidon pour l'entrée en temps réel</span>
<span class="stamnt">e</span>

<span class="csdtag">&lt;/CsScore&gt;</span>
<span class="csdtag">&lt;/CsoundSynthesizer&gt;</span></pre>
      </div>
      <p>
  </p>
      <p>
    Tous les opcodes de widget sont des opcodes de taux-init, même si les valuateurs donnent en
    sortie des variables de taux-k. Ceci est dû au fait qu'un processus léger indépendant est exécuté sur la
    base d'un mécanisme de fonctions de rappel. Cela permet de consommer très peu de ressources système car
    on évite la scrutation. (A la différence des autres opcodes de contrôleurs basés sur le MIDI). On peut
    ainsi utiliser n'importe quel nombre de fenêtres et de valuateurs sans dégrader l'exécution en temps réel.
  </p>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="ControlFltkContainers"></a>Conteneurs FLTK</h3>
            </div>
          </div>
        </div>
        <p>
    Les opcodes pour les conteneurs FLTK sont :
     </p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc; ">
            <li class="listitem">
              <p>
                <a class="link" href="FLgroup.html" title="FLgroup">
                  <em class="citetitle">FLgroup</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLgroupEnd.html" title="FLgroupEnd">
                  <em class="citetitle">FLgroupEnd</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLpack.html" title="FLpack">
                  <em class="citetitle">FLpack</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLpackEnd.html" title="FLpackEnd">
                  <em class="citetitle">FLpackEnd</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLpanel.html" title="FLpanel">
                  <em class="citetitle">FLpanel</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLpanelEnd.html" title="FLpanelEnd">
                  <em class="citetitle">FLpanelEnd</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLscroll.html" title="FLscroll">
                  <em class="citetitle">FLscroll</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLscrollEnd.html" title="FLscrollEnd">
                  <em class="citetitle">FLscrollEnd</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLtabs.html" title="FLtabs">
                  <em class="citetitle">FLtabs</em>
                </a>
              </p>
            </li>
            <li class="listitem">
              <p>
                <a class="link" href="FLtabsEnd.html" title="FLtabsEnd">
                  <em class="citetitle">FLtabsEnd</em>
                </a>
              </p>
            </li>
          </ul>
        </div>
        <p>
 </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="ControlDurctl.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="ControlTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="ControlFltkValuators.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Instructions de contrôle de durée </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> Valuateurs FLTK</td>
        </tr>
      </table>
    </div>
  </body>
</html>
